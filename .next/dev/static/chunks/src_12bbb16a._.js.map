{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vchug/OneDrive/Desktop/vtb-front/src/lib/hooks/useProfile.ts"],"sourcesContent":["import { useState } from 'react';\r\nimport {\r\n  useGetCurrentUserQuery,\r\n  useUpdateUserMutation,\r\n  useUploadAvatarMutation,\r\n  useDeleteAvatarMutation,\r\n  useRefreshAvatarUrlMutation,\r\n  UpdateUserData,\r\n  UpdateProfileData,\r\n} from '../store/api/UserApi';\r\n\r\nexport const useProfile = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const {\r\n    data: user,\r\n    isLoading: userLoading,\r\n    error: userError,\r\n    refetch: refetchUser,\r\n  } = useGetCurrentUserQuery();\r\n\r\n  const profile = user?.profile;\r\n\r\n  const refetchProfile = async () => {\r\n    return refetchUser();\r\n  };\r\n\r\n  const [updateUser, { isLoading: updateUserLoading }] = useUpdateUserMutation();\r\n  const [uploadAvatar, { isLoading: uploadAvatarLoading }] = useUploadAvatarMutation();\r\n  const [deleteAvatar, { isLoading: deleteAvatarLoading }] = useDeleteAvatarMutation();\r\n  const [refreshAvatarUrl, { isLoading: refreshAvatarUrlLoading }] = useRefreshAvatarUrlMutation();\r\n\r\n  const handleUpdateUser = async (userData: UpdateUserData) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await updateUser(userData).unwrap();\r\n      await refetchUser();\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при обновлении пользователя');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProfile = async (profileData: UpdateProfileData) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await updateUser(profileData).unwrap();\r\n      await refetchUser();\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при обновлении профиля');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUploadAvatar = async (file: File) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const formData = new FormData();\r\n      formData.append('avatar', file);\r\n\r\n      const result = await uploadAvatar(formData).unwrap();\r\n      await refetchUser();\r\n      return result;\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при загрузке аватара');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAvatar = async (fileId: number) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await deleteAvatar(fileId).unwrap();\r\n      await refetchUser(); \r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при удалении аватара');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRefreshAvatarUrl = async (fileId: number, expiry?: number) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      const result = await refreshAvatarUrl({ fileId, expiry }).unwrap();\r\n      await refetchUser(); \r\n      return result;\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при обновлении URL аватара');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getFullName = () => {\r\n    if (!profile) return user?.username || 'Пользователь';\r\n\r\n    const firstName = profile.firstName || '';\r\n    const lastName = profile.lastName || '';\r\n\r\n    if (firstName && lastName) {\r\n      return `${firstName} ${lastName}`;\r\n    } else if (firstName) {\r\n      return firstName;\r\n    } else if (lastName) {\r\n      return lastName;\r\n    }\r\n\r\n    return user?.username || 'Пользователь';\r\n  };\r\n\r\n  const getInitials = () => {\r\n    const fullName = getFullName();\r\n    const names = fullName.split(' ');\r\n    if (names.length >= 2) {\r\n      return `${names[0][0]}${names[1][0]}`.toUpperCase();\r\n    }\r\n    return fullName[0]?.toUpperCase() || 'U';\r\n  };\r\n\r\n  const hasAvatar = () => {\r\n    return profile?.avatar && profile.avatar.trim() !== '';\r\n  };\r\n\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    return new Date(dateString).toLocaleDateString('ru-RU');\r\n  };\r\n\r\n  const formatBirthDate = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    return new Date(dateString).toLocaleDateString('ru-RU');\r\n  };\r\n\r\n  return {\r\n    user,\r\n    profile,\r\n    isLoading:\r\n      isLoading ||\r\n      userLoading ||\r\n      updateUserLoading ||\r\n      uploadAvatarLoading ||\r\n      deleteAvatarLoading ||\r\n      refreshAvatarUrlLoading,\r\n    error: error || userError,\r\n    handleUpdateUser,\r\n    handleUpdateProfile,\r\n    handleUploadAvatar,\r\n    handleDeleteAvatar,\r\n    handleRefreshAvatarUrl,\r\n    getFullName,\r\n    getInitials,\r\n    hasAvatar,\r\n    formatDate,\r\n    formatBirthDate,\r\n    refetchUser,\r\n    refetchProfile,\r\n  };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vchug/OneDrive/Desktop/vtb-front/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  Container,\n  Grid,\n  Card,\n  Text,\n  Group,\n  Stack,\n  Badge,\n  Button,\n  SimpleGrid,\n  Title,\n  Center,\n  Loader,\n  Modal,\n  TextInput,\n  Alert,\n} from '@mantine/core';\nimport {\n  IconWallet,\n  IconArrowUpRight,\n  IconArrowDownRight,\n  IconChartBar,\n  IconHistory,\n  IconTransfer,\n  IconPlus,\n  IconTrendingUp,\n  IconBuildingBank,\n  IconLink,\n  IconAlertCircle,\n  IconCheck,\n  IconCreditCard,\n  IconRefresh,\n  IconRotateClockwise,\n  IconChevronDown,\n  IconChevronUp,\n  IconSearch,\n} from '@tabler/icons-react';\nimport { useGetCurrentUserQuery } from '@/lib/store/api/UserApi';\nimport { useProfile } from '@/lib/hooks/useProfile';\nimport { useGetBanksQuery, useBankConsentMutation, useLazyGetBankConsentStatusQuery, useGetBankOverviewQuery, useLazyGetBankOverviewQuery, useSyncBanksMutation, useLazyGetAccountTransactionsQuery, Bank, Transaction } from '@/lib/store/api/AuthApi';\nimport { notifications } from '@mantine/notifications';\nimport AnalyticsCard from '../profile/AnalyticsCard';\nimport Link from 'next/link';\n\nconst PAGE_STYLES = {\n  background: 'linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%)',\n  cardBackground: '#ffffff',\n  paperBackground: '#f8f9fa',\n  buttonBlue: '#4A90E2',\n  successGreen: '#52C41A',\n  accentPurple: '#8B5CF6',\n  accentOrange: '#FF8A65',\n  textPrimary: '#1A1A1A',\n  textSecondary: '#6B7280',\n  borderColor: '#E5E7EB',\n} as const;\n\nconst TRANSACTION_STATUS_COLORS = {\n  Успешно: 'green',\n  'В обработке': 'orange',\n  Отменено: 'red',\n} as const;\n\n// Моковые данные удалены - используем данные из API\n\nconst QUICK_ACTIONS = [\n  { icon: IconPlus, label: 'Пополнить счет', color: '#1E90FF', link: '#' },\n  { icon: IconTransfer, label: 'Перевести', color: '#27AE60', link: '#' },\n  { icon: IconChartBar, label: 'Аналитика', color: '#E67E22', link: '/analytics' },\n  { icon: IconHistory, label: 'История', color: '#3498DB', link: '#' },\n] as const;\n\n// Интерфейс транзакции из API будет определен динамически\n\nconst getStatusColor = (status: string): string => {\n  return TRANSACTION_STATUS_COLORS[status as keyof typeof TRANSACTION_STATUS_COLORS] || 'gray';\n};\n\nexport default function Dashboard() {\n  const { data: authUser, isLoading: authLoading, isSuccess: authOk } = useGetCurrentUserQuery();\n  const { user, profile, isLoading: profileLoading, getFullName } = useProfile();\n  const { data: banksData, isLoading: banksLoading, error: banksError } = useGetBanksQuery();\n  const [bankConsent, { isLoading: consentLoading }] = useBankConsentMutation();\n  const [getConsentStatus, { isLoading: statusLoading }] = useLazyGetBankConsentStatusQuery();\n  const { data: accountsData, isLoading: accountsLoading, error: accountsError, refetch: refetchAccounts } = useGetBankOverviewQuery({ refresh: true });\n  const [syncBanks, { isLoading: syncLoading }] = useSyncBanksMutation();\n  \n  // Логирование для отладки\n  useEffect(() => {\n    console.log('accountsData:', accountsData);\n    console.log('accountsLoading:', accountsLoading);\n    console.log('accountsError:', accountsError);\n    if (accountsData) {\n      console.log('accountsData.banks:', accountsData.banks);\n      console.log('accountsData.totalBanks:', accountsData.totalBanks);\n      console.log('accountsData.totalAccounts:', accountsData.totalAccounts);\n      if (accountsData.banks && accountsData.banks.length > 0) {\n        accountsData.banks.forEach((bank, idx) => {\n          console.log(`Bank ${idx} (${bank.bankId}):`, bank.accounts?.length || 0, 'accounts');\n        });\n      }\n    }\n  }, [accountsData, accountsLoading, accountsError]);\n  const [getBankOverviewRefresh, { isLoading: refreshLoading }] = useLazyGetBankOverviewQuery();\n  const [getAccountTransactions] = useLazyGetAccountTransactionsQuery();\n  const [loadedTransactions, setLoadedTransactions] = useState<Transaction[]>([]);\n  const [transactionsLoading, setTransactionsLoading] = useState(false);\n  const router = useRouter();\n  \n  const [selectedBank, setSelectedBank] = useState<Bank | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [clientId, setClientId] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [lastRequestId, setLastRequestId] = useState<string | null>(null);\n  const [consentStatus, setConsentStatus] = useState<string | null>(null);\n  const [transactionsExpanded, setTransactionsExpanded] = useState(false);\n  const [bankSearchQuery, setBankSearchQuery] = useState('');\n  const [banksExpanded, setBanksExpanded] = useState(false);\n\n  useEffect(() => {\n    document.body.style.overflowX = 'hidden';\n    document.documentElement.style.overflowX = 'hidden';\n    return () => {\n      document.body.style.overflowX = '';\n      document.documentElement.style.overflowX = '';\n    };\n  }, []);\n\n  const isLoading = authLoading || profileLoading;\n  \n  // Рассчитываем общий баланс из реальных данных (только активные счета в RUB)\n  const totalBalance = useMemo(() => {\n    if (!accountsData?.banks || !Array.isArray(accountsData.banks)) {\n      return 0;\n    }\n    let total = 0;\n    accountsData.banks.forEach((bank) => {\n      if (bank.accounts && Array.isArray(bank.accounts)) {\n        bank.accounts.forEach((account) => {\n          // Проверяем, что счет активен и валюта RUB\n          if (account.isActive && account.currency === 'RUB') {\n            // Обрабатываем balance как строку или число\n            const balanceStr = String(account.balance || account.balances?.[0]?.amount || '0');\n            const balance = parseFloat(balanceStr);\n            if (!isNaN(balance) && balance > 0) {\n              total += balance;\n            }\n          }\n        });\n      }\n    });\n    return total;\n  }, [accountsData]);\n  \n  // Основная валюта для отображения\n  const mainCurrency = 'RUB';\n\n  // Загружаем транзакции для всех счетов\n  useEffect(() => {\n    const loadTransactions = async () => {\n      if (!accountsData?.banks || accountsData.banks.length === 0) {\n        setLoadedTransactions([]);\n        return;\n      }\n\n      setTransactionsLoading(true);\n      const allTransactions: Transaction[] = [];\n\n      try {\n        // Загружаем транзакции для каждого счета\n        const promises = accountsData.banks.flatMap((bank) =>\n          bank.accounts.map(async (account) => {\n            try {\n              const result = await getAccountTransactions({\n                bankId: bank.bankId,\n                accountId: account.accountId,\n              }).unwrap();\n              \n              if (result?.data?.transaction && Array.isArray(result.data.transaction)) {\n                return result.data.transaction.map((tx) => ({\n                  ...tx,\n                  accountName: account.nickname || account.accountName,\n                  bankId: bank.bankId,\n                }));\n              }\n              return [];\n            } catch (error) {\n              console.error(`Error loading transactions for ${bank.bankId}/${account.accountId}:`, error);\n              return [];\n            }\n          })\n        );\n\n        const results = await Promise.all(promises);\n        const flatTransactions = results.flat();\n        \n        // Сортируем по дате (новые сначала)\n        flatTransactions.sort((a, b) => {\n          const dateA = new Date(a.bookingDateTime || a.valueDateTime || 0).getTime();\n          const dateB = new Date(b.bookingDateTime || b.valueDateTime || 0).getTime();\n          return dateB - dateA;\n        });\n\n        setLoadedTransactions(flatTransactions);\n      } catch (error) {\n        console.error('Error loading transactions:', error);\n        setLoadedTransactions([]);\n      } finally {\n        setTransactionsLoading(false);\n      }\n    };\n\n    loadTransactions();\n  }, [accountsData, getAccountTransactions]);\n\n  // Собираем все транзакции (из API и из overview, если есть)\n  const allTransactions = useMemo(() => {\n    const transactionsMap = new Map<string, any>();\n    \n    // Добавляем загруженные транзакции из API\n    loadedTransactions.forEach((transaction) => {\n      const uniqueKey = `${transaction.bankId || ''}_${transaction.accountId || ''}_${transaction.transactionId || ''}`;\n      if (!transactionsMap.has(uniqueKey)) {\n        transactionsMap.set(uniqueKey, {\n          ...transaction,\n          // Преобразуем формат для совместимости\n          amount: parseFloat(transaction.amount?.amount || '0'),\n          currency: transaction.amount?.currency || 'RUB',\n          date: transaction.bookingDateTime || transaction.valueDateTime,\n          name: transaction.transactionInformation || 'Транзакция',\n          status: transaction.status || 'Booked',\n          creditDebitIndicator: transaction.creditDebitIndicator,\n          uniqueKey, // Сохраняем уникальный ключ для использования в key prop\n        });\n      }\n    });\n\n    // Также добавляем транзакции из overview, если они есть\n    if (accountsData?.banks) {\n      accountsData.banks.forEach((bank) => {\n        bank.accounts.forEach((account) => {\n          if (account.transactions && Array.isArray(account.transactions)) {\n            account.transactions.forEach((transaction: any) => {\n              const uniqueKey = `${bank.bankId}_${account.accountId || ''}_${transaction.transactionId || transaction.id || ''}`;\n              // Проверяем, нет ли уже такой транзакции\n              if (!transactionsMap.has(uniqueKey)) {\n                transactionsMap.set(uniqueKey, {\n                  ...transaction,\n                  accountName: account.nickname || account.accountName,\n                  bankId: bank.bankId,\n                  accountId: account.accountId,\n                  uniqueKey,\n                });\n              }\n            });\n          }\n        });\n      });\n    }\n\n    // Преобразуем Map в массив и сортируем по дате (новые сначала)\n    const transactions = Array.from(transactionsMap.values());\n    transactions.sort((a, b) => {\n      const dateA = new Date(a.date || a.bookingDateTime || a.valueDateTime || a.createdAt || a.transactionDate || 0).getTime();\n      const dateB = new Date(b.date || b.bookingDateTime || b.valueDateTime || b.createdAt || b.transactionDate || 0).getTime();\n      return dateB - dateA;\n    });\n    \n    return transactions.slice(0, 10); // Берем последние 10 транзакций\n  }, [loadedTransactions, accountsData]);\n\n  // Рассчитываем доходы и расходы из транзакций\n  const incomeExpense = useMemo(() => {\n    let income = 0;\n    let expense = 0;\n    \n    if (allTransactions.length === 0) {\n      // Если транзакций нет, возвращаем 0\n      return { income: 0, expense: 0 };\n    }\n    \n    allTransactions.forEach((transaction: any) => {\n      // Обрабатываем разные форматы суммы\n      let amount = 0;\n      if (typeof transaction.amount === 'object' && transaction.amount?.amount) {\n        amount = parseFloat(String(transaction.amount.amount || '0'));\n      } else {\n        amount = parseFloat(String(transaction.amount || transaction.value || '0'));\n      }\n      \n      if (!isNaN(amount) && amount !== 0) {\n        // Учитываем creditDebitIndicator для правильного определения дохода/расхода\n        const isCredit = transaction.creditDebitIndicator === 'Credit';\n        if (isCredit) {\n          income += Math.abs(amount);\n        } else if (transaction.creditDebitIndicator === 'Debit') {\n          expense += Math.abs(amount);\n        } else {\n          // Если creditDebitIndicator не указан, используем знак amount как fallback\n          if (amount > 0) {\n            income += Math.abs(amount);\n          } else {\n            expense += Math.abs(amount);\n          }\n        }\n      }\n    });\n    \n    return { income, expense };\n  }, [allTransactions]);\n\n  const handleBankClick = (bank: Bank) => {\n    setSelectedBank(bank);\n    setClientId('');\n    setError(null);\n    setIsModalOpen(true);\n  };\n\n  const handleConsentSubmit = async () => {\n    if (!selectedBank) return;\n\n    try {\n      setError(null);\n      setConsentStatus(null);\n      const result = await bankConsent({\n        bankId: selectedBank.id,\n        data: clientId ? { client_id: clientId } : undefined,\n      }).unwrap();\n\n      setLastRequestId(result.requestId);\n\n      notifications.show({\n        title: 'Успешно',\n        message: result.message,\n        color: 'green',\n        icon: <IconCheck size={16} />,\n      });\n\n      // Автоматически проверяем статус после отправки запроса\n      if (result.requestId) {\n        checkConsentStatus(selectedBank.id, result.requestId);\n      }\n    } catch (err: any) {\n      const errorMessage = err?.data?.message || err?.message || 'Произошла ошибка при отправке запроса';\n      setError(errorMessage);\n      notifications.show({\n        title: 'Ошибка',\n        message: errorMessage,\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const checkConsentStatus = async (bankId: string, requestId: string) => {\n    try {\n      const status = await getConsentStatus({ bankId, requestId }).unwrap();\n      setConsentStatus(status.status);\n      \n      if (status.status === 'approved') {\n        notifications.show({\n          title: 'Согласие одобрено',\n          message: status.consentId ? `Consent ID: ${status.consentId}` : 'Банк успешно подключен',\n          color: 'green',\n          icon: <IconCheck size={16} />,\n        });\n        // Закрываем модальное окно после успешного одобрения\n        setTimeout(() => {\n          setIsModalOpen(false);\n          setClientId('');\n          setSelectedBank(null);\n          setLastRequestId(null);\n          setConsentStatus(null);\n        }, 2000);\n      } else {\n        notifications.show({\n          title: 'Статус согласия',\n          message: `Текущий статус: ${status.status}`,\n          color: 'blue',\n        });\n      }\n    } catch (err: any) {\n      const errorMessage = err?.data?.message || err?.message || 'Ошибка при проверке статуса';\n      notifications.show({\n        title: 'Ошибка',\n        message: errorMessage,\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const handleCheckStatus = () => {\n    if (selectedBank && lastRequestId) {\n      checkConsentStatus(selectedBank.id, lastRequestId);\n    }\n  };\n\n  const handleModalClose = () => {\n    setIsModalOpen(false);\n    setClientId('');\n    setError(null);\n    setSelectedBank(null);\n    setLastRequestId(null);\n    setConsentStatus(null);\n  };\n\n  const handleRefreshAccounts = async () => {\n    try {\n      await getBankOverviewRefresh({ refresh: true }).unwrap();\n      // Обновляем данные через refetch основного запроса\n      await refetchAccounts();\n      notifications.show({\n        title: 'Успешно',\n        message: 'Счета обновлены',\n        color: 'green',\n        icon: <IconCheck size={16} />,\n      });\n    } catch (error) {\n      notifications.show({\n        title: 'Ошибка',\n        message: 'Не удалось обновить счета',\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const handleSyncBanks = async () => {\n    try {\n      const result = await syncBanks().unwrap();\n      notifications.show({\n        title: 'Синхронизация запущена',\n        message: result.message || 'Обновление балансов всех банков начато',\n        color: 'blue',\n        icon: <IconRotateClockwise size={16} />,\n      });\n      // После синхронизации обновляем данные\n      setTimeout(() => {\n        refetchAccounts();\n      }, 2000);\n    } catch (error) {\n      notifications.show({\n        title: 'Ошибка',\n        message: 'Не удалось запустить синхронизацию',\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const formatBalance = (balance: string | number | undefined | null, currency: string = 'RUB') => {\n    if (!balance && balance !== 0) {\n      return `0.00 ${currency}`;\n    }\n    const num = typeof balance === 'string' ? parseFloat(balance) : balance;\n    if (isNaN(num)) {\n      return `0.00 ${currency}`;\n    }\n    return `${num.toLocaleString('ru-RU', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ${currency}`;\n  };\n\n  const getBankName = (bankId: string): string => {\n    const bankNames: Record<string, string> = {\n      'abank': 'Альфа-Банк',\n      'vbank': 'ВТБ',\n      'sbank': 'Сбербанк',\n      'vtb': 'ВТБ',\n      'sberbank': 'Сбербанк',\n    };\n    return bankNames[bankId] || bankId.toUpperCase();\n  };\n\n  // Обработка данных банков - проверяем разные форматы ответа\n  const banksList = useMemo(() => {\n    if (!banksData) return [];\n    // Если это массив строк напрямую\n    if (Array.isArray(banksData)) return banksData;\n    // Если это объект с полем banks\n    if (banksData && typeof banksData === 'object' && 'banks' in banksData && Array.isArray(banksData.banks)) {\n      return banksData.banks;\n    }\n    return [];\n  }, [banksData]);\n\n  if (isLoading && !user) {\n    return (\n      <main\n        style={{\n          background: PAGE_STYLES.background,\n          minHeight: '100vh',\n          width: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <Stack align=\"center\" gap=\"md\">\n          <Loader size=\"md\" />\n          <Text size=\"sm\" c=\"dimmed\">Загрузка дашборда...</Text>\n        </Stack>\n      </main>\n    );\n  }\n\n  if (!authOk && !authLoading) {\n    return (\n      <main\n        style={{\n          background: PAGE_STYLES.background,\n          minHeight: '100vh',\n          width: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <Center h={\"70dvh\"}>\n          <Stack align=\"center\" gap=\"md\">\n            <Title order={3} size=\"h3\">Пожалуйста, авторизуйтесь</Title>\n            <Text size=\"sm\" c=\"dimmed\">Для доступа к дашборду нужен вход в систему</Text>\n            <Group>\n              <Button size=\"sm\" component={Link as any} href=\"/login\">Войти</Button>\n              <Button size=\"sm\" variant=\"light\" component={Link as any} href=\"/registration\">Регистрация</Button>\n            </Group>\n          </Stack>\n        </Center>\n      </main>\n    );\n  }\n\n  return (\n    <main\n      style={{\n        background: PAGE_STYLES.background,\n        minHeight: '100vh',\n        width: '100%',\n        margin: 0,\n        padding: 0,\n        overflowX: 'hidden',\n        position: 'relative',\n        display: 'flex',\n        justifyContent: 'center',\n      }}\n    >\n      <Container size=\"xl\" py=\"xl\" style={{ maxWidth: '1400px', width: '100%', overflowX: 'hidden', margin: '0 auto' }}>\n        <Stack gap=\"lg\">\n          {/* Заголовок */}\n          <Group justify=\"space-between\" align=\"center\">\n            <Title order={1} size=\"h2\" fw={700} c={PAGE_STYLES.textPrimary}>\n              Дашборд\n            </Title>\n          </Group>\n\n          {/* Основная Grid: Баланс, Сбережения, Транзакции, Статистика */}\n          <div\n            style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(12, 1fr)',\n              gap: 'var(--mantine-spacing-lg)',\n            }}\n          >\n            {/* Баланс */}\n            <div style={{ gridColumn: 'span 12 / span 12', '@media (min-width: 768px)': { gridColumn: 'span 4 / span 4' } } as React.CSSProperties}>\n              <Card\n                padding=\"xl\"\n                radius=\"xl\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  border: `1px solid ${PAGE_STYLES.borderColor}`,\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n                  height: '100%',\n                }}\n              >\n                <Stack gap=\"md\">\n                  <Text size=\"sm\" c={PAGE_STYLES.textSecondary} fw={500}>\n                    Общий баланс\n                  </Text>\n                  <Title order={1} style={{ fontSize: '2rem', lineHeight: 1.2, color: PAGE_STYLES.textPrimary, fontWeight: 700 }}>\n                    {totalBalance > 0 \n                      ? totalBalance.toLocaleString('ru-RU', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ₽'\n                      : accountsLoading \n                        ? 'Загрузка...' \n                        : '0.00 ₽'}\n                  </Title>\n                  <Group gap=\"lg\" mt=\"xs\">\n                    <Stack gap={4}>\n                      <Text size=\"xs\" c={PAGE_STYLES.textSecondary}>Доходы</Text>\n                      <Text size=\"md\" fw={600} c={PAGE_STYLES.successGreen}>\n                        {incomeExpense.income > 0 \n                          ? formatBalance(incomeExpense.income.toString(), 'RUB')\n                          : '0.00 RUB'}\n                      </Text>\n                    </Stack>\n                    <Stack gap={4}>\n                      <Text size=\"xs\" c={PAGE_STYLES.textSecondary}>Расходы</Text>\n                      <Text size=\"md\" fw={600} c=\"#EF4444\">\n                        {incomeExpense.expense > 0 \n                          ? formatBalance(incomeExpense.expense.toString(), 'RUB')\n                          : '0.00 RUB'}\n                      </Text>\n                    </Stack>\n                  </Group>\n                </Stack>\n              </Card>\n            </div>\n\n            {/* Сбережения */}\n            <div style={{ gridColumn: 'span 12 / span 12', '@media (min-width: 768px)': { gridColumn: 'span 4 / span 4' } } as React.CSSProperties}>\n              <Card\n                padding=\"xl\"\n                radius=\"xl\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  border: `1px solid ${PAGE_STYLES.borderColor}`,\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n                  height: '100%',\n                }}\n              >\n                <Stack gap=\"md\">\n                  <Text size=\"sm\" c={PAGE_STYLES.textSecondary} fw={500}>\n                    Сбережения\n                  </Text>\n                  <Title order={1} style={{ fontSize: '2rem', lineHeight: 1.2, color: PAGE_STYLES.textPrimary, fontWeight: 700 }}>\n                    {totalBalance > 0 \n                      ? (totalBalance * 0.1).toLocaleString('ru-RU', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ₽'\n                      : '0.00 ₽'}\n                  </Title>\n                  <Group gap=\"xs\" mt=\"xs\">\n                    <IconTrendingUp size={16} color={PAGE_STYLES.successGreen} />\n                    <Text size=\"xs\" c={PAGE_STYLES.textSecondary}>\n                      +2.36% за месяц\n                    </Text>\n                  </Group>\n                </Stack>\n              </Card>\n            </div>\n\n            {/* Транзакции - растягиваются на 2 строки */}\n            <div style={{ \n              gridColumn: 'span 12 / span 12', \n              '@media (min-width: 768px)': { \n                gridColumn: 'span 4 / span 4',\n                gridRow: 'span 2 / span 2',\n              }\n            } as React.CSSProperties}>\n              <Card\n                padding=\"xl\"\n                radius=\"xl\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  border: `1px solid ${PAGE_STYLES.borderColor}`,\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n                  height: '100%',\n                  display: 'flex',\n                  flexDirection: 'column',\n                }}\n              >\n                <Stack gap=\"md\" style={{ flex: 1 }}>\n                  <Group justify=\"space-between\" align=\"center\">\n                    <Title order={3} size=\"h4\" fw={600} c={PAGE_STYLES.textPrimary}>\n                      Транзакции\n                    </Title>\n                    {allTransactions.length > 5 && (\n                      <Button\n                        variant=\"subtle\"\n                        size=\"xs\"\n                        rightSection={transactionsExpanded ? <IconChevronUp size={14} /> : <IconChevronDown size={14} />}\n                        onClick={() => setTransactionsExpanded(!transactionsExpanded)}\n                        c={PAGE_STYLES.textSecondary}\n                      >\n                        {transactionsExpanded ? 'Свернуть' : `Все (${allTransactions.length})`}\n                      </Button>\n                    )}\n                  </Group>\n                  \n                  {transactionsLoading ? (\n                    <Center py=\"md\" style={{ flex: 1 }}>\n                      <Loader size=\"sm\" />\n                    </Center>\n                  ) : allTransactions.length > 0 ? (\n                    <Stack gap=\"xs\" style={{ flex: 1, overflowY: 'auto' }}>\n                      {(transactionsExpanded ? allTransactions : allTransactions.slice(0, 5)).map((transaction: any, index) => {\n                        const transactionDate = transaction.date || transaction.bookingDateTime || transaction.valueDateTime || transaction.createdAt || transaction.transactionDate;\n                        const date = transactionDate ? new Date(transactionDate) : new Date();\n                        const day = date.getDate();\n                        const monthNames = ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];\n                        const month = monthNames[date.getMonth()] || '';\n                        \n                        // Обрабатываем разные форматы суммы\n                        let amount = 0;\n                        if (typeof transaction.amount === 'object' && transaction.amount?.amount) {\n                          amount = parseFloat(String(transaction.amount.amount || '0'));\n                        } else {\n                          amount = parseFloat(String(transaction.amount || transaction.value || '0'));\n                        }\n                        \n                        // Определяем знак на основе creditDebitIndicator\n                        const isCredit = transaction.creditDebitIndicator === 'Credit';\n                        const amountStr = isCredit\n                          ? `+${formatBalance(Math.abs(amount).toString(), transaction.amount?.currency || transaction.currency || 'RUB')}`\n                          : `-${formatBalance(Math.abs(amount).toString(), transaction.amount?.currency || transaction.currency || 'RUB')}`;\n                        \n                        const status = transaction.status === 'Booked' ? 'Успешно' : transaction.status || 'Успешно';\n                        const name = transaction.transactionInformation || transaction.name || transaction.description || transaction.merchantName || 'Транзакция';\n                        \n                        return (\n                          <Group\n                            key={transaction.uniqueKey || `${transaction.bankId || ''}_${transaction.accountId || ''}_${transaction.transactionId || transaction.id || index}`}\n                            justify=\"space-between\"\n                            p=\"sm\"\n                            style={{\n                              backgroundColor: index % 2 === 0 ? PAGE_STYLES.paperBackground : 'transparent',\n                              borderRadius: 'var(--mantine-radius-md)',\n                              border: `1px solid ${PAGE_STYLES.borderColor}`,\n                            }}\n                            wrap=\"nowrap\"\n                          >\n                            <Group gap=\"sm\" style={{ flex: 1, minWidth: 0 }}>\n                              <div\n                                style={{\n                                  width: '40px',\n                                  height: '40px',\n                                  borderRadius: '12px',\n                                  background: isCredit \n                                    ? `${PAGE_STYLES.successGreen}15` \n                                    : `${PAGE_STYLES.accentOrange}15`,\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  justifyContent: 'center',\n                                }}\n                              >\n                                {isCredit ? (\n                                  <IconArrowUpRight size={20} color={PAGE_STYLES.successGreen} />\n                                ) : (\n                                  <IconArrowDownRight size={20} color={PAGE_STYLES.accentOrange} />\n                                )}\n                              </div>\n                              \n                              <Stack gap={2} style={{ flex: 1, minWidth: 0 }}>\n                                <Text size=\"sm\" fw={500} style={{ color: PAGE_STYLES.textPrimary, lineHeight: 1.2 }} truncate>\n                                  {name}\n                                </Text>\n                                <Text size=\"xs\" c={PAGE_STYLES.textSecondary}>\n                                  {day} {month}\n                                </Text>\n                              </Stack>\n                            </Group>\n                            \n                            <Text \n                              fw={600} \n                              size=\"sm\" \n                              style={{ \n                                color: isCredit ? PAGE_STYLES.successGreen : PAGE_STYLES.textPrimary, \n                                minWidth: '90px', \n                                textAlign: 'right',\n                                whiteSpace: 'nowrap'\n                              }}\n                            >\n                              {amountStr}\n                            </Text>\n                          </Group>\n                        );\n                      })}\n                    </Stack>\n                  ) : (\n                    <Center py=\"xl\">\n                      <Stack align=\"center\" gap=\"xs\">\n                        <IconHistory size={32} color={PAGE_STYLES.textSecondary} />\n                        <Text size=\"sm\" c={PAGE_STYLES.textSecondary}>\n                          Нет транзакций\n                        </Text>\n                      </Stack>\n                    </Center>\n                  )}\n                </Stack>\n              </Card>\n            </div>\n\n            {/* Статистика - под балансом и сбережениями */}\n            <div style={{ \n              gridColumn: 'span 12 / span 12', \n              '@media (min-width: 768px)': { \n                gridColumn: 'span 8 / span 8',\n              }\n            } as React.CSSProperties}>\n              <Card\n                padding=\"xl\"\n                radius=\"xl\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  border: `1px solid ${PAGE_STYLES.borderColor}`,\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n                }}\n              >\n                <Stack gap=\"md\">\n                  <Group justify=\"space-between\" align=\"center\">\n                    <Title order={3} size=\"h4\" fw={600} c={PAGE_STYLES.textPrimary}>\n                      Статистика\n                    </Title>\n                    <Badge variant=\"light\" size=\"sm\" c={PAGE_STYLES.textSecondary}>\n                      Последние 7 дней\n                    </Badge>\n                  </Group>\n\n                  {/* Расширенная столбчатая диаграмма */}\n                  {(() => {\n                    // Группируем транзакции по дням за последние 7 дней\n                    const last7Days = Array.from({ length: 7 }, (_, i) => {\n                      const date = new Date();\n                      date.setDate(date.getDate() - (6 - i));\n                      return date;\n                    });\n\n                    const dailyData = last7Days.map(date => {\n                      const dayStart = new Date(date);\n                      dayStart.setHours(0, 0, 0, 0);\n                      const dayEnd = new Date(date);\n                      dayEnd.setHours(23, 59, 59, 999);\n\n                      let dayIncome = 0;\n                      let dayExpense = 0;\n\n                      allTransactions.forEach((transaction: any) => {\n                        const txDate = transaction.date || transaction.bookingDateTime || transaction.valueDateTime;\n                        if (txDate) {\n                          const txDateObj = new Date(txDate);\n                          if (txDateObj >= dayStart && txDateObj <= dayEnd) {\n                            let amount = 0;\n                            if (typeof transaction.amount === 'object' && transaction.amount?.amount) {\n                              amount = parseFloat(String(transaction.amount.amount || '0'));\n                            } else {\n                              amount = parseFloat(String(transaction.amount || '0'));\n                            }\n\n                            if (!isNaN(amount) && amount !== 0) {\n                              const isCredit = transaction.creditDebitIndicator === 'Credit';\n                              if (isCredit) {\n                                dayIncome += Math.abs(amount);\n                              } else if (transaction.creditDebitIndicator === 'Debit') {\n                                dayExpense += Math.abs(amount);\n                              }\n                            }\n                          }\n                        }\n                      });\n\n                      return {\n                        date,\n                        income: dayIncome,\n                        expense: dayExpense,\n                      };\n                    });\n\n                    const maxValue = Math.max(\n                      ...dailyData.map(d => Math.max(d.income, d.expense)),\n                      1000 // Минимальное значение для масштаба\n                    );\n\n                    return (\n                      <div style={{ \n                        height: '280px', \n                        display: 'flex', \n                        alignItems: 'flex-end', \n                        justifyContent: 'space-between',\n                        gap: '12px',\n                        padding: '20px 0',\n                      }}>\n                        {dailyData.map((dayData, index) => {\n                          const incomeHeight = (dayData.income / maxValue) * 100;\n                          const expenseHeight = (dayData.expense / maxValue) * 100;\n                          const day = dayData.date.getDate();\n                          const month = dayData.date.getMonth() + 1;\n                          \n                          return (\n                            <div key={index} style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '6px', minWidth: '40px' }}>\n                              <div style={{ \n                                width: '100%', \n                                display: 'flex', \n                                flexDirection: 'column',\n                                alignItems: 'center',\n                                gap: '2px',\n                                height: '220px',\n                                justifyContent: 'flex-end',\n                              }}>\n                                {/* Доходы (светлый) */}\n                                {incomeHeight > 0 && (\n                                  <div\n                                    style={{\n                                      width: '100%',\n                                      height: `${Math.max(incomeHeight, 3)}%`,\n                                      background: `${PAGE_STYLES.buttonBlue}40`,\n                                      borderRadius: '6px 6px 0 0',\n                                      minHeight: '4px',\n                                      transition: 'all 0.3s ease',\n                                    }}\n                                    title={`Доходы: ${formatBalance(dayData.income.toString(), 'RUB')}`}\n                                  />\n                                )}\n                                {/* Расходы (темный) */}\n                                {expenseHeight > 0 && (\n                                  <div\n                                    style={{\n                                      width: '100%',\n                                      height: `${Math.max(expenseHeight, 3)}%`,\n                                      background: PAGE_STYLES.textPrimary,\n                                      borderRadius: incomeHeight > 0 ? '0 0 6px 6px' : '6px',\n                                      minHeight: '4px',\n                                      transition: 'all 0.3s ease',\n                                    }}\n                                    title={`Расходы: ${formatBalance(dayData.expense.toString(), 'RUB')}`}\n                                  />\n                                )}\n                              </div>\n                              <Text size=\"xs\" c={PAGE_STYLES.textSecondary} fw={500}>\n                                {day}/{month}\n                              </Text>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    );\n                  })()}\n\n                  {/* Легенда */}\n                  <Group gap=\"lg\" mt=\"md\" justify=\"center\">\n                    <Group gap=\"xs\">\n                      <div style={{\n                        width: '12px',\n                        height: '12px',\n                        borderRadius: '2px',\n                        background: PAGE_STYLES.textPrimary,\n                      }} />\n                      <Text size=\"xs\" c={PAGE_STYLES.textSecondary}>Расходы</Text>\n                    </Group>\n                    <Group gap=\"xs\">\n                      <div style={{\n                        width: '12px',\n                        height: '12px',\n                        borderRadius: '2px',\n                        background: `${PAGE_STYLES.buttonBlue}40`,\n                      }} />\n                      <Text size=\"xs\" c={PAGE_STYLES.textSecondary}>Доходы</Text>\n                    </Group>\n                  </Group>\n                </Stack>\n              </Card>\n            </div>\n          </div>\n\n          {/* Подключить банк - компактный блок */}\n          <Grid gutter={{ base: 'md', sm: 'lg' }}>\n            <Grid.Col span={{ base: 12, md: 4 }}>\n              <Card\n                padding=\"xl\"\n                radius=\"xl\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  border: `1px solid ${PAGE_STYLES.borderColor}`,\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n                }}\n              >\n                <Stack gap=\"md\">\n                  <Group justify=\"space-between\" align=\"center\">\n                    <Title order={4} size=\"h5\" fw={600} c={PAGE_STYLES.textPrimary}>\n                      Подключить банк\n                    </Title>\n                    {banksList.length > 0 && (\n                      <Button\n                        variant=\"subtle\"\n                        size=\"xs\"\n                        rightSection={banksExpanded ? <IconChevronUp size={14} /> : <IconChevronDown size={14} />}\n                        onClick={() => setBanksExpanded(!banksExpanded)}\n                        c={PAGE_STYLES.textSecondary}\n                      >\n                        {banksExpanded ? 'Свернуть' : `(${banksList.length})`}\n                      </Button>\n                    )}\n                  </Group>\n\n              {banksLoading ? (\n                <Center py=\"md\">\n                  <Loader size=\"sm\" />\n                </Center>\n              ) : banksError ? (\n                <Alert color=\"red\" icon={<IconAlertCircle size={16} />}>\n                  <Text size=\"xs\">Ошибка загрузки банков</Text>\n                </Alert>\n              ) : banksList.length > 0 ? (\n                <>\n                  <TextInput\n                    placeholder=\"Поиск банка...\"\n                    leftSection={<IconSearch size={16} />}\n                    value={bankSearchQuery}\n                    onChange={(e) => setBankSearchQuery(e.target.value)}\n                    size=\"sm\"\n                  />\n                  \n                  {banksExpanded && (\n                    <Stack gap=\"xs\" mt=\"xs\">\n                      {banksList\n                        .filter((bankId) => {\n                          if (!bankSearchQuery.trim()) return true;\n                          const bankName = getBankName(bankId).toLowerCase();\n                          return bankName.includes(bankSearchQuery.toLowerCase());\n                        })\n                        .map((bankId) => (\n                          <Group\n                            key={bankId}\n                            p=\"sm\"\n                            style={{\n                              background: PAGE_STYLES.paperBackground,\n                              borderRadius: 'var(--mantine-radius-md)',\n                              border: `1px solid ${PAGE_STYLES.borderColor}`,\n                              cursor: 'pointer',\n                              transition: 'all 0.2s ease',\n                            }}\n                            onClick={() => handleBankClick({ id: bankId, name: getBankName(bankId) })}\n                            onMouseEnter={(e) => {\n                              e.currentTarget.style.background = '#f0f0f0';\n                              e.currentTarget.style.borderColor = PAGE_STYLES.buttonBlue;\n                            }}\n                            onMouseLeave={(e) => {\n                              e.currentTarget.style.background = PAGE_STYLES.paperBackground;\n                              e.currentTarget.style.borderColor = PAGE_STYLES.borderColor;\n                            }}\n                          >\n                            <IconBuildingBank size={20} color={PAGE_STYLES.buttonBlue} />\n                            <Text size=\"sm\" fw={500} style={{ flex: 1 }} c={PAGE_STYLES.textPrimary}>\n                              {getBankName(bankId)}\n                            </Text>\n                            <IconLink size={16} color={PAGE_STYLES.buttonBlue} />\n                          </Group>\n                        ))}\n                      {banksList.filter((bankId) => {\n                        if (!bankSearchQuery.trim()) return true;\n                        const bankName = getBankName(bankId).toLowerCase();\n                        return bankName.includes(bankSearchQuery.toLowerCase());\n                      }).length === 0 && (\n                        <Text size=\"xs\" c=\"dimmed\" ta=\"center\" py=\"sm\">\n                          Банки не найдены\n                        </Text>\n                      )}\n                    </Stack>\n                  )}\n                </>\n              ) : (\n                <Text size=\"xs\" c=\"dimmed\" ta=\"center\" py=\"sm\">\n                  Нет доступных банков\n                </Text>\n              )}\n            </Stack>\n          </Card>\n            </Grid.Col>\n          </Grid>\n\n          {/* Счета */}\n          <Card\n            padding=\"xl\"\n            radius=\"xl\"\n            style={{\n              background: PAGE_STYLES.cardBackground,\n              border: `1px solid ${PAGE_STYLES.borderColor}`,\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n            }}\n          >\n            <Group justify=\"space-between\" mb=\"md\">\n              <Title order={3} size=\"h4\" fw={600} c={PAGE_STYLES.textPrimary}>Мои счета</Title>\n              <Group gap=\"xs\">\n                <Text size=\"xs\" c=\"dimmed\">\n                  {accountsData ? `${accountsData.totalBanks} банков, ${accountsData.totalAccounts} счетов` : ''}\n                </Text>\n                <Button\n                  size=\"xs\"\n                  variant=\"light\"\n                  leftSection={<IconRotateClockwise size={16} />}\n                  onClick={handleSyncBanks}\n                  loading={syncLoading}\n                  disabled={syncLoading || refreshLoading}\n                >\n                  Синхронизировать\n                </Button>\n                <Button\n                  size=\"xs\"\n                  variant=\"light\"\n                  leftSection={<IconRefresh size={16} />}\n                  onClick={handleRefreshAccounts}\n                  loading={refreshLoading}\n                  disabled={refreshLoading || syncLoading}\n                >\n                  Обновить\n                </Button>\n              </Group>\n            </Group>\n\n            {accountsLoading ? (\n              <Center py=\"xl\">\n                <Loader size=\"sm\" />\n              </Center>\n            ) : accountsError ? (\n              <Center py=\"xl\">\n                <Stack align=\"center\" gap=\"xs\">\n                  <IconAlertCircle size={32} color=\"red\" />\n                  <Text size=\"sm\" c=\"red\">\n                    Ошибка загрузки счетов\n                  </Text>\n                  <Text size=\"xs\" c=\"dimmed\">\n                    {accountsError && 'data' in accountsError ? String(accountsError.data) : 'Неизвестная ошибка'}\n                  </Text>\n                  <Button\n                    size=\"xs\"\n                    variant=\"light\"\n                    onClick={() => refetchAccounts()}\n                    mt=\"sm\"\n                  >\n                    Попробовать снова\n                  </Button>\n                </Stack>\n              </Center>\n            ) : accountsData && accountsData.banks && accountsData.banks.length > 0 ? (\n              <SimpleGrid cols={{ base: 1, sm: 2, md: Math.min(accountsData.banks.length, 4) }} spacing=\"md\">\n                {accountsData.banks.map((bank) => {\n                  const accounts = bank.accounts || [];\n                  return (\n                    <Card\n                      key={bank.bankId}\n                      padding=\"md\"\n                      radius=\"md\"\n                      style={{\n                        background: PAGE_STYLES.paperBackground,\n                        border: '1px solid rgba(0, 0, 0, 0.1)',\n                      }}\n                    >\n                      <Stack gap=\"md\">\n                        <Group mb=\"sm\">\n                          <IconBuildingBank size={20} color={PAGE_STYLES.buttonBlue} />\n                          <Text size=\"sm\" fw={600} c=\"dimmed\">\n                            {bank.bankId}\n                          </Text>\n                          <Badge size=\"sm\" variant=\"light\">\n                            {accounts.length} {accounts.length === 1 ? 'счет' : accounts.length === 0 ? 'счетов' : 'счетов'}\n                          </Badge>\n                        </Group>\n                        {accounts.length > 0 ? (\n                          <Stack gap=\"md\">\n                            {accounts.map((account) => (\n                        <Card\n                          key={account.id}\n                          padding=\"md\"\n                          radius=\"md\"\n                          style={{\n                            background: PAGE_STYLES.paperBackground,\n                            border: '1px solid rgba(0, 0, 0, 0.1)',\n                          }}\n                        >\n                          <Stack gap=\"xs\">\n                            <Group justify=\"space-between\" align=\"flex-start\">\n                              <Stack gap={2} style={{ flex: 1 }}>\n                                <Text size=\"sm\" fw={600}>\n                                  {account.nickname || account.accountName}\n                                </Text>\n                                <Text size=\"xs\" c=\"dimmed\">\n                                  {account.accountNumber ? `****${account.accountNumber.slice(-4)}` : account.accountId}\n                                </Text>\n                              </Stack>\n                              <Badge\n                                color={account.isActive ? 'green' : 'gray'}\n                                size=\"xs\"\n                                variant=\"light\"\n                              >\n                                {account.isActive ? 'Активен' : 'Неактивен'}\n                              </Badge>\n                            </Group>\n\n                            <Group gap=\"xs\" align=\"center\">\n                              <IconCreditCard size={16} color={PAGE_STYLES.buttonBlue} />\n                              <Text size=\"xs\" c=\"dimmed\">\n                                {account.accountType} • {account.accountSubType}\n                              </Text>\n                            </Group>\n\n                            <Stack gap={2} mt=\"xs\">\n                              <Text size=\"lg\" fw={700} c={PAGE_STYLES.buttonBlue}>\n                                {formatBalance(account.balance, account.currency)}\n                              </Text>\n                              <Text size=\"xs\" c=\"dimmed\">\n                                Доступно: {formatBalance(account.availableBalance, account.availableBalanceCurrency)}\n                              </Text>\n                            </Stack>\n\n                            {account.bankConsent && (\n                              <Badge\n                                size=\"xs\"\n                                color={account.bankConsent.status === 'approved' ? 'green' : 'orange'}\n                                variant=\"light\"\n                              >\n                                Согласие: {account.bankConsent.status}\n                              </Badge>\n                            )}\n                          </Stack>\n                        </Card>\n                            ))}\n                          </Stack>\n                        ) : (\n                          <Text size=\"sm\" c=\"dimmed\" ta=\"center\">\n                            Нет счетов в этом банке\n                          </Text>\n                        )}\n                      </Stack>\n                    </Card>\n                  );\n                })}\n              </SimpleGrid>\n            ) : (\n              <Center py=\"xl\">\n                <Stack align=\"center\" gap=\"xs\">\n                  <IconCreditCard size={32} color=\"gray\" />\n                  <Text size=\"sm\" c=\"dimmed\">\n                    Нет подключенных счетов\n                  </Text>\n                  <Text size=\"xs\" c=\"dimmed\">\n                    Подключите банк, чтобы увидеть счета\n                  </Text>\n                </Stack>\n              </Center>\n            )}\n          </Card>\n        </Stack>\n      </Container>\n\n      {/* Модальное окно для подключения банка */}\n      <Modal\n        opened={isModalOpen}\n        onClose={handleModalClose}\n        title={`Подключение банка ${selectedBank?.name || ''}`}\n        size=\"md\"\n      >\n        <Stack gap=\"md\">\n          {error && (\n            <Alert icon={<IconAlertCircle size={16} />} title=\"Ошибка\" color=\"red\">\n              {error}\n            </Alert>\n          )}\n\n          <Text size=\"sm\" c=\"dimmed\">\n            Введите ваш client_id для банка {selectedBank?.name}. Это поле опционально, если у вас уже есть сохраненный client_id для этого банка.\n          </Text>\n\n          <TextInput\n            label=\"Client ID\"\n            placeholder=\"team052-1\"\n            value={clientId}\n            onChange={(e) => setClientId(e.target.value)}\n            description=\"Оставьте пустым, если client_id уже сохранен в вашем профиле\"\n            disabled={!!lastRequestId}\n          />\n\n          {lastRequestId && (\n            <Alert color=\"blue\" icon={<IconCheck size={16} />}>\n              <Stack gap=\"xs\">\n                <Text size=\"sm\" fw={500}>\n                  Запрос отправлен. Request ID: {lastRequestId}\n                </Text>\n                {consentStatus && (\n                  <Text size=\"sm\">\n                    Статус: <strong>{consentStatus}</strong>\n                  </Text>\n                )}\n                <Button\n                  size=\"xs\"\n                  variant=\"light\"\n                  onClick={handleCheckStatus}\n                  loading={statusLoading}\n                  disabled={statusLoading}\n                >\n                  Проверить статус\n                </Button>\n              </Stack>\n            </Alert>\n          )}\n\n          <Group justify=\"flex-end\" gap=\"sm\" mt=\"md\">\n            <Button variant=\"outline\" onClick={handleModalClose}>\n              {lastRequestId ? 'Закрыть' : 'Отмена'}\n            </Button>\n            {!lastRequestId && (\n              <Button \n                onClick={handleConsentSubmit} \n                loading={consentLoading}\n                disabled={consentLoading}\n              >\n                Отправить запрос\n              </Button>\n            )}\n          </Group>\n        </Stack>\n      </Modal>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}