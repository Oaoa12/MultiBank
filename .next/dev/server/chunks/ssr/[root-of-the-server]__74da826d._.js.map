{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vchug/OneDrive/Desktop/vtb-front/src/lib/hooks/useProfile.ts"],"sourcesContent":["import { useState } from 'react';\r\nimport {\r\n  useGetCurrentUserQuery,\r\n  useUpdateUserMutation,\r\n  useUploadAvatarMutation,\r\n  useDeleteAvatarMutation,\r\n  useRefreshAvatarUrlMutation,\r\n  UpdateUserData,\r\n  UpdateProfileData,\r\n} from '../store/api/UserApi';\r\n\r\nexport const useProfile = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const {\r\n    data: user,\r\n    isLoading: userLoading,\r\n    error: userError,\r\n    refetch: refetchUser,\r\n  } = useGetCurrentUserQuery();\r\n\r\n  const profile = user?.profile;\r\n\r\n  const refetchProfile = async () => {\r\n    return refetchUser();\r\n  };\r\n\r\n  const [updateUser, { isLoading: updateUserLoading }] = useUpdateUserMutation();\r\n  const [uploadAvatar, { isLoading: uploadAvatarLoading }] = useUploadAvatarMutation();\r\n  const [deleteAvatar, { isLoading: deleteAvatarLoading }] = useDeleteAvatarMutation();\r\n  const [refreshAvatarUrl, { isLoading: refreshAvatarUrlLoading }] = useRefreshAvatarUrlMutation();\r\n\r\n  const handleUpdateUser = async (userData: UpdateUserData) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await updateUser(userData).unwrap();\r\n      await refetchUser();\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при обновлении пользователя');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProfile = async (profileData: UpdateProfileData) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await updateUser(profileData).unwrap();\r\n      await refetchUser();\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при обновлении профиля');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUploadAvatar = async (file: File) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const formData = new FormData();\r\n      formData.append('avatar', file);\r\n\r\n      const result = await uploadAvatar(formData).unwrap();\r\n      await refetchUser();\r\n      return result;\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при загрузке аватара');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAvatar = async (fileId: number) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await deleteAvatar(fileId).unwrap();\r\n      await refetchUser(); \r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при удалении аватара');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRefreshAvatarUrl = async (fileId: number, expiry?: number) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      const result = await refreshAvatarUrl({ fileId, expiry }).unwrap();\r\n      await refetchUser(); \r\n      return result;\r\n    } catch (err: any) {\r\n      setError(err?.data?.message || 'Ошибка при обновлении URL аватара');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getFullName = () => {\r\n    if (!profile) return user?.username || 'Пользователь';\r\n\r\n    const firstName = profile.firstName || '';\r\n    const lastName = profile.lastName || '';\r\n\r\n    if (firstName && lastName) {\r\n      return `${firstName} ${lastName}`;\r\n    } else if (firstName) {\r\n      return firstName;\r\n    } else if (lastName) {\r\n      return lastName;\r\n    }\r\n\r\n    return user?.username || 'Пользователь';\r\n  };\r\n\r\n  const getInitials = () => {\r\n    const fullName = getFullName();\r\n    const names = fullName.split(' ');\r\n    if (names.length >= 2) {\r\n      return `${names[0][0]}${names[1][0]}`.toUpperCase();\r\n    }\r\n    return fullName[0]?.toUpperCase() || 'U';\r\n  };\r\n\r\n  const hasAvatar = () => {\r\n    return profile?.avatar && profile.avatar.trim() !== '';\r\n  };\r\n\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    return new Date(dateString).toLocaleDateString('ru-RU');\r\n  };\r\n\r\n  const formatBirthDate = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    return new Date(dateString).toLocaleDateString('ru-RU');\r\n  };\r\n\r\n  return {\r\n    user,\r\n    profile,\r\n    isLoading:\r\n      isLoading ||\r\n      userLoading ||\r\n      updateUserLoading ||\r\n      uploadAvatarLoading ||\r\n      deleteAvatarLoading ||\r\n      refreshAvatarUrlLoading,\r\n    error: error || userError,\r\n    handleUpdateUser,\r\n    handleUpdateProfile,\r\n    handleUploadAvatar,\r\n    handleDeleteAvatar,\r\n    handleRefreshAvatarUrl,\r\n    getFullName,\r\n    getInitials,\r\n    hasAvatar,\r\n    formatDate,\r\n    formatBirthDate,\r\n    refetchUser,\r\n    refetchProfile,\r\n  };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUO,MAAM,aAAa;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,EACJ,MAAM,IAAI,EACV,WAAW,WAAW,EACtB,OAAO,SAAS,EAChB,SAAS,WAAW,EACrB,GAAG,IAAA,+JAAsB;IAE1B,MAAM,UAAU,MAAM;IAEtB,MAAM,iBAAiB;QACrB,OAAO;IACT;IAEA,MAAM,CAAC,YAAY,EAAE,WAAW,iBAAiB,EAAE,CAAC,GAAG,IAAA,8JAAqB;IAC5E,MAAM,CAAC,cAAc,EAAE,WAAW,mBAAmB,EAAE,CAAC,GAAG,IAAA,gKAAuB;IAClF,MAAM,CAAC,cAAc,EAAE,WAAW,mBAAmB,EAAE,CAAC,GAAG,IAAA,gKAAuB;IAClF,MAAM,CAAC,kBAAkB,EAAE,WAAW,uBAAuB,EAAE,CAAC,GAAG,IAAA,oKAA2B;IAE9F,MAAM,mBAAmB,OAAO;QAC9B,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM,WAAW,UAAU,MAAM;YACjC,MAAM;QACR,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,MAAM,WAAW;YAC/B,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,sBAAsB,OAAO;QACjC,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM,WAAW,aAAa,MAAM;YACpC,MAAM;QACR,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,MAAM,WAAW;YAC/B,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,aAAa;YACb,SAAS;YAET,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,UAAU;YAE1B,MAAM,SAAS,MAAM,aAAa,UAAU,MAAM;YAClD,MAAM;YACN,OAAO;QACT,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,MAAM,WAAW;YAC/B,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM,aAAa,QAAQ,MAAM;YACjC,MAAM;QACR,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,MAAM,WAAW;YAC/B,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,yBAAyB,OAAO,QAAgB;QACpD,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM,SAAS,MAAM,iBAAiB;gBAAE;gBAAQ;YAAO,GAAG,MAAM;YAChE,MAAM;YACN,OAAO;QACT,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,MAAM,WAAW;YAC/B,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,SAAS,OAAO,MAAM,YAAY;QAEvC,MAAM,YAAY,QAAQ,SAAS,IAAI;QACvC,MAAM,WAAW,QAAQ,QAAQ,IAAI;QAErC,IAAI,aAAa,UAAU;YACzB,OAAO,GAAG,UAAU,CAAC,EAAE,UAAU;QACnC,OAAO,IAAI,WAAW;YACpB,OAAO;QACT,OAAO,IAAI,UAAU;YACnB,OAAO;QACT;QAEA,OAAO,MAAM,YAAY;IAC3B;IAEA,MAAM,cAAc;QAClB,MAAM,WAAW;QACjB,MAAM,QAAQ,SAAS,KAAK,CAAC;QAC7B,IAAI,MAAM,MAAM,IAAI,GAAG;YACrB,OAAO,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,WAAW;QACnD;QACA,OAAO,QAAQ,CAAC,EAAE,EAAE,iBAAiB;IACvC;IAEA,MAAM,YAAY;QAChB,OAAO,SAAS,UAAU,QAAQ,MAAM,CAAC,IAAI,OAAO;IACtD;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,YAAY,OAAO;QACxB,OAAO,IAAI,KAAK,YAAY,kBAAkB,CAAC;IACjD;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,YAAY,OAAO;QACxB,OAAO,IAAI,KAAK,YAAY,kBAAkB,CAAC;IACjD;IAEA,OAAO;QACL;QACA;QACA,WACE,aACA,eACA,qBACA,uBACA,uBACA;QACF,OAAO,SAAS;QAChB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vchug/OneDrive/Desktop/vtb-front/src/app/profile/AnalyticsCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, useMemo } from 'react';\r\nimport { Card, Text, Stack, Group, ThemeIcon } from '@mantine/core';\r\nimport { IconArrowUpRight } from '@tabler/icons-react';\r\n\r\ninterface AnalyticsCardProps {\r\n  value: number;\r\n  label: string;\r\n  percent: number;\r\n  color?: string;\r\n  heights?: number[];\r\n}\r\n\r\nconst CHART_CONFIG = {\r\n  BAR_COUNT: 5,\r\n  BAR_WIDTH: 18,\r\n  GAP: 6,\r\n  HEIGHT: 70,\r\n  GRAY_COLOR: '#D9D9D9',\r\n} as const;\r\n\r\nconst ANIMATION_CONFIG = {\r\n  MAX_ROTATION: 12,\r\n  SHADOW_MULTIPLIER: 0.3,\r\n  SHADOW_BLUR_BASE: 8,\r\n  SHADOW_BLUR_HOVER: 15,\r\n  SCALE_HOVER: 1.03,\r\n  TRANSITION_FAST: '0.15s ease-out',\r\n  TRANSITION_SLOW: '0.4s ease-out',\r\n} as const;\r\n\r\nexport default function AnalyticsCard({\r\n  value,\r\n  label,\r\n  percent,\r\n  color = '#E67E22',\r\n  heights = [35, 28, 52, 45, 68],\r\n}: AnalyticsCardProps) {\r\n  const [rotateX, setRotateX] = useState(0);\r\n  const [rotateY, setRotateY] = useState(0);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const cardRef = useRef<HTMLDivElement>(null);\r\n\r\n  const chartWidth = useMemo(\r\n    () => CHART_CONFIG.BAR_COUNT * CHART_CONFIG.BAR_WIDTH + (CHART_CONFIG.BAR_COUNT - 1) * CHART_CONFIG.GAP,\r\n    []\r\n  );\r\n\r\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!cardRef.current) return;\r\n\r\n    const rect = cardRef.current.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n    const centerX = rect.width / 2;\r\n    const centerY = rect.height / 2;\r\n\r\n    setRotateX(((y - centerY) / centerY) * -ANIMATION_CONFIG.MAX_ROTATION);\r\n    setRotateY(((x - centerX) / centerX) * ANIMATION_CONFIG.MAX_ROTATION);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setRotateX(0);\r\n    setRotateY(0);\r\n    setIsHovered(false);\r\n  };\r\n\r\n  const handleMouseEnter = () => setIsHovered(true);\r\n\r\n  const boxShadow = useMemo(() => {\r\n    const shadowX = rotateY * ANIMATION_CONFIG.SHADOW_MULTIPLIER;\r\n    const shadowY = -rotateX * ANIMATION_CONFIG.SHADOW_MULTIPLIER;\r\n    const shadowBlur =\r\n      (Math.abs(rotateX) + Math.abs(rotateY)) * ANIMATION_CONFIG.SHADOW_MULTIPLIER +\r\n      (isHovered ? ANIMATION_CONFIG.SHADOW_BLUR_HOVER : ANIMATION_CONFIG.SHADOW_BLUR_BASE);\r\n    const shadowOpacity = isHovered ? 0.2 : 0.1;\r\n\r\n    return isHovered\r\n      ? `${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0, 0, 0, ${shadowOpacity}), 0 8px 20px rgba(0, 0, 0, 0.12)`\r\n      : '0 4px 6px rgba(0, 0, 0, 0.08)';\r\n  }, [rotateX, rotateY, isHovered]);\r\n\r\n  const transform = useMemo(\r\n    () =>\r\n      `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(${isHovered ? ANIMATION_CONFIG.SCALE_HOVER : 1})`,\r\n    [rotateX, rotateY, isHovered]\r\n  );\r\n\r\n  const transition = useMemo(\r\n    () =>\r\n      isHovered\r\n        ? `transform ${ANIMATION_CONFIG.TRANSITION_FAST}, box-shadow ${ANIMATION_CONFIG.TRANSITION_FAST}`\r\n        : `transform ${ANIMATION_CONFIG.TRANSITION_SLOW}, box-shadow ${ANIMATION_CONFIG.TRANSITION_SLOW}`,\r\n    [isHovered]\r\n  );\r\n\r\n  const chartBars = useMemo(\r\n    () =>\r\n      heights.map((height, index) => {\r\n        const x = index * (CHART_CONFIG.BAR_WIDTH + CHART_CONFIG.GAP);\r\n        const barHeight = (CHART_CONFIG.HEIGHT * height) / 100;\r\n        const y = CHART_CONFIG.HEIGHT - barHeight;\r\n        const isLast = index === heights.length - 1;\r\n\r\n        return (\r\n          <rect\r\n            key={index}\r\n            x={x}\r\n            y={y}\r\n            width={CHART_CONFIG.BAR_WIDTH}\r\n            height={barHeight}\r\n            fill={isLast ? color : CHART_CONFIG.GRAY_COLOR}\r\n          />\r\n        );\r\n      }),\r\n    [heights, color]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      ref={cardRef}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseLeave={handleMouseLeave}\r\n      onMouseEnter={handleMouseEnter}\r\n      style={{\r\n        transform,\r\n        transition,\r\n        cursor: 'pointer',\r\n        transformStyle: 'preserve-3d',\r\n        boxShadow,\r\n        borderRadius: 16,\r\n        overflow: 'hidden',\r\n      }}\r\n    >\r\n      <Card\r\n        radius=\"lg\"\r\n        padding=\"md\"\r\n        style={{\r\n          borderRadius: 16,\r\n          backgroundColor: '#fff',\r\n          height: 140,\r\n          boxShadow: 'none',\r\n        }}\r\n      >\r\n        <Group justify=\"space-between\" align=\"center\" style={{ height: '100%' }}>\r\n          <Stack gap={2} style={{ flex: 1 }}>\r\n            <Text fw={700} color={color} style={{ fontSize: '2.25rem', lineHeight: 1.2 }}>\r\n              {value}\r\n            </Text>\r\n            <Text size=\"md\" fw={500} c=\"dimmed\">\r\n              {label}\r\n            </Text>\r\n            <Group gap={4}>\r\n              <ThemeIcon color=\"gray\" variant=\"light\" size=\"xs\" radius=\"xl\">\r\n                <IconArrowUpRight size={12} />\r\n              </ThemeIcon>\r\n              <Text size=\"sm\" fw={600} c=\"dimmed\">\r\n                {percent}%\r\n              </Text>\r\n            </Group>\r\n          </Stack>\r\n\r\n          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\r\n            <svg width={chartWidth} height={CHART_CONFIG.HEIGHT} viewBox={`0 0 ${chartWidth} ${CHART_CONFIG.HEIGHT}`}>\r\n              {chartBars}\r\n            </svg>\r\n          </div>\r\n        </Group>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vchug/OneDrive/Desktop/vtb-front/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  Container,\n  Grid,\n  Card,\n  Text,\n  Group,\n  Stack,\n  Badge,\n  Button,\n  SimpleGrid,\n  Title,\n  Center,\n  Loader,\n  Modal,\n  TextInput,\n  Alert,\n} from '@mantine/core';\nimport {\n  IconWallet,\n  IconArrowUpRight,\n  IconArrowDownRight,\n  IconChartBar,\n  IconHistory,\n  IconTransfer,\n  IconPlus,\n  IconTrendingUp,\n  IconBuildingBank,\n  IconLink,\n  IconAlertCircle,\n  IconCheck,\n  IconCreditCard,\n  IconRefresh,\n} from '@tabler/icons-react';\nimport { useGetCurrentUserQuery } from '@/lib/store/api/UserApi';\nimport { useProfile } from '@/lib/hooks/useProfile';\nimport { useGetBanksQuery, useBankConsentMutation, useLazyGetBankConsentStatusQuery, useGetBankOverviewQuery, useLazyGetBankOverviewQuery, Bank } from '@/lib/store/api/AuthApi';\nimport { notifications } from '@mantine/notifications';\nimport AnalyticsCard from '../profile/AnalyticsCard';\nimport Link from 'next/link';\n\nconst PAGE_STYLES = {\n  background: 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)',\n  cardBackground: 'rgba(255, 255, 255, 0.8)',\n  paperBackground: '#f5f6f7',\n  buttonBlue: '#1E90FF',\n  successGreen: '#28a745',\n} as const;\n\nconst TRANSACTION_STATUS_COLORS = {\n  Успешно: 'green',\n  'В обработке': 'orange',\n  Отменено: 'red',\n} as const;\n\n// Моковые данные удалены - используем данные из API\n\nconst QUICK_ACTIONS = [\n  { icon: IconPlus, label: 'Пополнить счет', color: '#1E90FF', link: '#' },\n  { icon: IconTransfer, label: 'Перевести', color: '#27AE60', link: '#' },\n  { icon: IconChartBar, label: 'Аналитика', color: '#E67E22', link: '/analytics' },\n  { icon: IconHistory, label: 'История', color: '#3498DB', link: '#' },\n] as const;\n\n// Интерфейс транзакции из API будет определен динамически\n\nconst getStatusColor = (status: string): string => {\n  return TRANSACTION_STATUS_COLORS[status as keyof typeof TRANSACTION_STATUS_COLORS] || 'gray';\n};\n\nexport default function Dashboard() {\n  const { data: authUser, isLoading: authLoading, isSuccess: authOk } = useGetCurrentUserQuery();\n  const { user, profile, isLoading: profileLoading, getFullName } = useProfile();\n  const { data: banksData, isLoading: banksLoading, error: banksError } = useGetBanksQuery();\n  const [bankConsent, { isLoading: consentLoading }] = useBankConsentMutation();\n  const [getConsentStatus, { isLoading: statusLoading }] = useLazyGetBankConsentStatusQuery();\n  const { data: accountsData, isLoading: accountsLoading, refetch: refetchAccounts } = useGetBankOverviewQuery({ refresh: false });\n  const [getBankOverviewRefresh, { isLoading: refreshLoading }] = useLazyGetBankOverviewQuery();\n  const router = useRouter();\n  \n  const [selectedBank, setSelectedBank] = useState<Bank | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [clientId, setClientId] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [lastRequestId, setLastRequestId] = useState<string | null>(null);\n  const [consentStatus, setConsentStatus] = useState<string | null>(null);\n\n  useEffect(() => {\n    document.body.style.overflowX = 'hidden';\n    document.documentElement.style.overflowX = 'hidden';\n    return () => {\n      document.body.style.overflowX = '';\n      document.documentElement.style.overflowX = '';\n    };\n  }, []);\n\n  const isLoading = authLoading || profileLoading;\n  \n  // Рассчитываем общий баланс из реальных данных\n  const totalBalance = useMemo(() => {\n    if (!accountsData?.banks) return 0;\n    let total = 0;\n    accountsData.banks.forEach((bank) => {\n      bank.accounts.forEach((account) => {\n        if (account.isActive && account.currency === 'RUB') {\n          total += parseFloat(account.balance) || 0;\n        }\n      });\n    });\n    return total;\n  }, [accountsData]);\n\n  // Собираем все транзакции из всех счетов\n  const allTransactions = useMemo(() => {\n    if (!accountsData?.banks) return [];\n    const transactions: any[] = [];\n    accountsData.banks.forEach((bank) => {\n      bank.accounts.forEach((account) => {\n        if (account.transactions && Array.isArray(account.transactions)) {\n          account.transactions.forEach((transaction: any) => {\n            transactions.push({\n              ...transaction,\n              accountName: account.nickname || account.accountName,\n              bankId: bank.bankId,\n            });\n          });\n        }\n      });\n    });\n    // Сортируем по дате (новые сначала)\n    return transactions.sort((a, b) => {\n      const dateA = new Date(a.date || a.createdAt || a.transactionDate || 0).getTime();\n      const dateB = new Date(b.date || b.createdAt || b.transactionDate || 0).getTime();\n      return dateB - dateA;\n    }).slice(0, 10); // Берем последние 10 транзакций\n  }, [accountsData]);\n\n  // Рассчитываем доходы и расходы из транзакций\n  const incomeExpense = useMemo(() => {\n    let income = 0;\n    let expense = 0;\n    \n    allTransactions.forEach((transaction: any) => {\n      const amount = parseFloat(transaction.amount || transaction.value || '0');\n      if (amount > 0) {\n        income += amount;\n      } else {\n        expense += Math.abs(amount);\n      }\n    });\n    \n    return { income, expense };\n  }, [allTransactions]);\n\n  const handleBankClick = (bank: Bank) => {\n    setSelectedBank(bank);\n    setClientId('');\n    setError(null);\n    setIsModalOpen(true);\n  };\n\n  const handleConsentSubmit = async () => {\n    if (!selectedBank) return;\n\n    try {\n      setError(null);\n      setConsentStatus(null);\n      const result = await bankConsent({\n        bankId: selectedBank.id,\n        data: clientId ? { client_id: clientId } : undefined,\n      }).unwrap();\n\n      setLastRequestId(result.requestId);\n\n      notifications.show({\n        title: 'Успешно',\n        message: result.message,\n        color: 'green',\n        icon: <IconCheck size={16} />,\n      });\n\n      // Автоматически проверяем статус после отправки запроса\n      if (result.requestId) {\n        checkConsentStatus(selectedBank.id, result.requestId);\n      }\n    } catch (err: any) {\n      const errorMessage = err?.data?.message || err?.message || 'Произошла ошибка при отправке запроса';\n      setError(errorMessage);\n      notifications.show({\n        title: 'Ошибка',\n        message: errorMessage,\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const checkConsentStatus = async (bankId: string, requestId: string) => {\n    try {\n      const status = await getConsentStatus({ bankId, requestId }).unwrap();\n      setConsentStatus(status.status);\n      \n      if (status.status === 'approved') {\n        notifications.show({\n          title: 'Согласие одобрено',\n          message: status.consentId ? `Consent ID: ${status.consentId}` : 'Банк успешно подключен',\n          color: 'green',\n          icon: <IconCheck size={16} />,\n        });\n        // Закрываем модальное окно после успешного одобрения\n        setTimeout(() => {\n          setIsModalOpen(false);\n          setClientId('');\n          setSelectedBank(null);\n          setLastRequestId(null);\n          setConsentStatus(null);\n        }, 2000);\n      } else {\n        notifications.show({\n          title: 'Статус согласия',\n          message: `Текущий статус: ${status.status}`,\n          color: 'blue',\n        });\n      }\n    } catch (err: any) {\n      const errorMessage = err?.data?.message || err?.message || 'Ошибка при проверке статуса';\n      notifications.show({\n        title: 'Ошибка',\n        message: errorMessage,\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const handleCheckStatus = () => {\n    if (selectedBank && lastRequestId) {\n      checkConsentStatus(selectedBank.id, lastRequestId);\n    }\n  };\n\n  const handleModalClose = () => {\n    setIsModalOpen(false);\n    setClientId('');\n    setError(null);\n    setSelectedBank(null);\n    setLastRequestId(null);\n    setConsentStatus(null);\n  };\n\n  const handleRefreshAccounts = async () => {\n    try {\n      await getBankOverviewRefresh({ refresh: true }).unwrap();\n      // Обновляем данные через refetch основного запроса\n      await refetchAccounts();\n      notifications.show({\n        title: 'Успешно',\n        message: 'Счета обновлены',\n        color: 'green',\n        icon: <IconCheck size={16} />,\n      });\n    } catch (error) {\n      notifications.show({\n        title: 'Ошибка',\n        message: 'Не удалось обновить счета',\n        color: 'red',\n        icon: <IconAlertCircle size={16} />,\n      });\n    }\n  };\n\n  const formatBalance = (balance: string, currency: string) => {\n    const num = parseFloat(balance);\n    return `${num.toLocaleString('ru-RU', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ${currency}`;\n  };\n\n  const getBankName = (bankId: string): string => {\n    const bankNames: Record<string, string> = {\n      'abank': 'Альфа-Банк',\n      'vbank': 'ВТБ',\n      'sbank': 'Сбербанк',\n      'vtb': 'ВТБ',\n      'sberbank': 'Сбербанк',\n    };\n    return bankNames[bankId] || bankId.toUpperCase();\n  };\n\n  // Обработка данных банков - проверяем разные форматы ответа\n  const banksList = useMemo(() => {\n    if (!banksData) {\n      console.log('banksData is null/undefined');\n      return [];\n    }\n    console.log('banksData:', banksData, 'type:', typeof banksData, 'isArray:', Array.isArray(banksData));\n    // Если это массив строк напрямую\n    if (Array.isArray(banksData)) {\n      console.log('banksData is array, length:', banksData.length);\n      return banksData;\n    }\n    // Если это объект с полем banks\n    if (banksData && typeof banksData === 'object' && 'banks' in banksData && Array.isArray(banksData.banks)) {\n      console.log('banksData.banks is array, length:', banksData.banks.length);\n      return banksData.banks;\n    }\n    console.log('banksData format not recognized');\n    return [];\n  }, [banksData]);\n\n  useEffect(() => {\n    if (banksError) {\n      console.error('Banks loading error:', banksError);\n    }\n  }, [banksError]);\n\n  if (isLoading && !user) {\n    return (\n      <main\n        style={{\n          background: PAGE_STYLES.background,\n          minHeight: '100vh',\n          width: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <Stack align=\"center\" gap=\"md\">\n          <Loader size=\"md\" />\n          <Text size=\"sm\" c=\"dimmed\">Загрузка дашборда...</Text>\n        </Stack>\n      </main>\n    );\n  }\n\n  if (!authOk && !authLoading) {\n    return (\n      <main\n        style={{\n          background: PAGE_STYLES.background,\n          minHeight: '100vh',\n          width: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <Center h={\"70dvh\"}>\n          <Stack align=\"center\" gap=\"md\">\n            <Title order={3} size=\"h3\">Пожалуйста, авторизуйтесь</Title>\n            <Text size=\"sm\" c=\"dimmed\">Для доступа к дашборду нужен вход в систему</Text>\n            <Group>\n              <Button size=\"sm\" component={Link as any} href=\"/login\">Войти</Button>\n              <Button size=\"sm\" variant=\"light\" component={Link as any} href=\"/registration\">Регистрация</Button>\n            </Group>\n          </Stack>\n        </Center>\n      </main>\n    );\n  }\n\n  return (\n    <main\n      style={{\n        background: PAGE_STYLES.background,\n        minHeight: '100vh',\n        width: '100%',\n        margin: 0,\n        padding: 0,\n        overflowX: 'hidden',\n        position: 'relative',\n        display: 'flex',\n        justifyContent: 'center',\n      }}\n    >\n      <Container size=\"xl\" py=\"md\" style={{ maxWidth: '1400px', width: '100%', overflowX: 'hidden', margin: '0 auto' }}>\n        <Stack gap=\"md\">\n          {/* Приветствие и общий баланс */}\n          <Grid gutter={{ base: 'md', sm: 'md' }}>\n            <Grid.Col span={{ base: 12, md: 8 }}>\n              <Card\n                padding=\"md\"\n                radius=\"lg\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  backdropFilter: 'blur(10px)',\n                }}\n              >\n                <Group justify=\"space-between\" align=\"flex-start\" wrap=\"nowrap\">\n                  <Stack gap=\"xs\" style={{ flex: 1 }}>\n                    <Text size=\"sm\" c=\"dimmed\" fw={500}>\n                      Добро пожаловать, {getFullName()}!\n                    </Text>\n                    <Title order={2} style={{ fontSize: '2rem', lineHeight: 1.2 }}>\n                      {totalBalance.toLocaleString('ru-RU', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ₽\n                    </Title>\n                    {accountsData && accountsData.totalAccounts > 0 && (\n                      <Badge color=\"blue\" variant=\"light\" size=\"sm\">\n                        {accountsData.totalAccounts} {accountsData.totalAccounts === 1 ? 'счет' : 'счетов'}\n                      </Badge>\n                    )}\n                  </Stack>\n                  <IconWallet size={32} color={PAGE_STYLES.buttonBlue} style={{ flexShrink: 0 }} />\n                </Group>\n              </Card>\n            </Grid.Col>\n\n            <Grid.Col span={{ base: 12, md: 4 }}>\n              <Card\n                padding=\"md\"\n                radius=\"lg\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  backdropFilter: 'blur(10px)',\n                }}\n              >\n                <Stack gap=\"sm\">\n                  <Title order={4} size=\"h5\">Быстрые действия</Title>\n                  <Stack gap=\"xs\">\n                    {QUICK_ACTIONS.map((action, index) => (\n                      <Button\n                        key={index}\n                        variant=\"subtle\"\n                        size=\"sm\"\n                        leftSection={<action.icon size={16} />}\n                        justify=\"start\"\n                        fullWidth\n                        onClick={() => {\n                          if (action.link !== '#') {\n                            router.push(action.link);\n                          }\n                        }}\n                        style={{\n                          color: action.color,\n                        }}\n                      >\n                        {action.label}\n                      </Button>\n                    ))}\n                  </Stack>\n                </Stack>\n              </Card>\n            </Grid.Col>\n          </Grid>\n\n          {/* Статистика */}\n          <Card\n            padding=\"md\"\n            radius=\"lg\"\n            style={{\n              background: PAGE_STYLES.cardBackground,\n              backdropFilter: 'blur(10px)',\n            }}\n          >\n            <Title order={3} size=\"h4\" mb=\"md\">Статистика операций</Title>\n            <SimpleGrid cols={{ base: 1, sm: 2, md: 3 }} spacing=\"md\">\n              {DASHBOARD_STATS.map((stat) => (\n                <AnalyticsCard key={stat.label} {...stat} />\n              ))}\n            </SimpleGrid>\n          </Card>\n\n          {/* Последние транзакции */}\n          <Card\n            padding=\"md\"\n            radius=\"lg\"\n            style={{\n              background: PAGE_STYLES.cardBackground,\n              backdropFilter: 'blur(10px)',\n            }}\n          >\n            <Group justify=\"space-between\" mb=\"sm\">\n              <Title order={3} size=\"h4\">Последние транзакции</Title>\n              <Button variant=\"subtle\" size=\"xs\">\n                Все операции\n              </Button>\n            </Group>\n\n            <Stack gap=\"xs\">\n              {RECENT_TRANSACTIONS.map((transaction, index) => (\n                <Group\n                  key={index}\n                  justify=\"space-between\"\n                  p=\"sm\"\n                  style={{\n                    backgroundColor: index % 2 === 0 ? 'var(--mantine-color-gray-0)' : 'transparent',\n                    borderRadius: 'var(--mantine-radius-md)',\n                  }}\n                  wrap=\"nowrap\"\n                >\n                  <div style={{ minWidth: '45px', textAlign: 'center' }}>\n                    <Text fw={700} size=\"md\" style={{ lineHeight: 1.2, color: '#000' }}>\n                      {transaction.day}\n                    </Text>\n                    <Text size=\"xs\" c=\"dimmed\" style={{ lineHeight: 1, textTransform: 'lowercase' }}>\n                      {transaction.month}\n                    </Text>\n                  </div>\n\n                  <div style={{ flex: 1, marginLeft: '12px' }}>\n                    <Text size=\"sm\" fw={500} style={{ color: '#000' }}>\n                      {transaction.name}\n                    </Text>\n                    <Text size=\"xs\" c=\"dimmed\" style={{ marginTop: '2px' }}>\n                      {transaction.category}\n                    </Text>\n                  </div>\n\n                  <Badge\n                    variant=\"light\"\n                    color={getStatusColor(transaction.status)}\n                    size=\"sm\"\n                    style={{ marginRight: '12px' }}\n                    leftSection={\n                      transaction.status === 'Успешно' ? (\n                        <div\n                          style={{\n                            width: '6px',\n                            height: '6px',\n                            borderRadius: '50%',\n                            backgroundColor: PAGE_STYLES.successGreen,\n                            marginRight: '4px',\n                          }}\n                        />\n                      ) : null\n                    }\n                  >\n                    {transaction.status}\n                  </Badge>\n\n                  <Text fw={600} size=\"sm\" style={{ color: '#000', minWidth: '90px', textAlign: 'right' }}>\n                    {transaction.amount}\n                  </Text>\n                </Group>\n              ))}\n            </Stack>\n          </Card>\n\n          {/* Доходы и расходы */}\n          <Grid gutter={{ base: 'md', sm: 'md' }}>\n            <Grid.Col span={{ base: 12, md: 6 }}>\n              <Card\n                padding=\"md\"\n                radius=\"lg\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  backdropFilter: 'blur(10px)',\n                }}\n              >\n                <Stack gap=\"sm\">\n                  <Group justify=\"space-between\">\n                    <Title order={4} size=\"h5\">Доходы</Title>\n                    <IconArrowUpRight size={20} color={PAGE_STYLES.successGreen} />\n                  </Group>\n                  <Text size=\"lg\" fw={700} c={PAGE_STYLES.successGreen}>\n                    +₽ 155,000\n                  </Text>\n                  <Text size=\"xs\" c=\"dimmed\">\n                    За текущий месяц\n                  </Text>\n                </Stack>\n              </Card>\n            </Grid.Col>\n\n            <Grid.Col span={{ base: 12, md: 6 }}>\n              <Card\n                padding=\"md\"\n                radius=\"lg\"\n                style={{\n                  background: PAGE_STYLES.cardBackground,\n                  backdropFilter: 'blur(10px)',\n                }}\n              >\n                <Stack gap=\"sm\">\n                  <Group justify=\"space-between\">\n                    <Title order={4} size=\"h5\">Расходы</Title>\n                    <IconArrowDownRight size={20} color=\"red\" />\n                  </Group>\n                  <Text size=\"lg\" fw={700} c=\"red\">\n                    -₽ 42,500\n                  </Text>\n                  <Text size=\"xs\" c=\"dimmed\">\n                    За текущий месяц\n                  </Text>\n                </Stack>\n              </Card>\n            </Grid.Col>\n          </Grid>\n\n          {/* Доступные банки */}\n          <Card\n            padding=\"md\"\n            radius=\"lg\"\n            style={{\n              background: PAGE_STYLES.cardBackground,\n              backdropFilter: 'blur(10px)',\n            }}\n          >\n            <Group justify=\"space-between\" mb=\"sm\">\n              <Title order={3} size=\"h4\">Доступные банки</Title>\n              <Text size=\"xs\" c=\"dimmed\">\n                Подключите банк для управления счетами\n              </Text>\n            </Group>\n\n            {banksLoading ? (\n              <Center py=\"xl\">\n                <Loader size=\"sm\" />\n              </Center>\n            ) : banksError ? (\n              <Center py=\"xl\">\n                <Stack align=\"center\" gap=\"xs\">\n                  <IconAlertCircle size={32} color=\"red\" />\n                  <Text size=\"sm\" c=\"red\">\n                    Ошибка загрузки банков\n                  </Text>\n                  <Text size=\"xs\" c=\"dimmed\">\n                    {banksError && 'data' in banksError ? String(banksError.data) : 'Неизвестная ошибка'}\n                  </Text>\n                </Stack>\n              </Center>\n            ) : banksList.length > 0 ? (\n              <SimpleGrid cols={{ base: 1, sm: 2, md: 3 }} spacing=\"md\">\n                {banksList.map((bankId) => (\n                  <Card\n                    key={bankId}\n                    padding=\"md\"\n                    radius=\"md\"\n                    style={{\n                      background: PAGE_STYLES.paperBackground,\n                      border: '1px solid rgba(0, 0, 0, 0.1)',\n                      cursor: 'pointer',\n                      transition: 'all 0.2s ease',\n                    }}\n                    onClick={() => handleBankClick({ id: bankId, name: getBankName(bankId) })}\n                    onMouseEnter={(e) => {\n                      e.currentTarget.style.transform = 'translateY(-2px)';\n                      e.currentTarget.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.style.transform = 'translateY(0)';\n                      e.currentTarget.style.boxShadow = 'none';\n                    }}\n                  >\n                    <Group justify=\"space-between\" align=\"center\">\n                      <Group gap=\"sm\">\n                        <IconBuildingBank size={24} color={PAGE_STYLES.buttonBlue} />\n                        <Stack gap={2}>\n                          <Text size=\"sm\" fw={600}>\n                            {getBankName(bankId)}\n                          </Text>\n                          <Text size=\"xs\" c=\"dimmed\">\n                            Нажмите для подключения\n                          </Text>\n                        </Stack>\n                      </Group>\n                      <IconLink size={18} color={PAGE_STYLES.buttonBlue} />\n                    </Group>\n                  </Card>\n                ))}\n              </SimpleGrid>\n            ) : (\n              <Center py=\"xl\">\n                <Stack align=\"center\" gap=\"xs\">\n                  <IconBuildingBank size={32} color=\"gray\" />\n                  <Text size=\"sm\" c=\"dimmed\">\n                    Нет доступных банков\n                  </Text>\n                </Stack>\n              </Center>\n            )}\n          </Card>\n\n          {/* Счета */}\n          <Card\n            padding=\"md\"\n            radius=\"lg\"\n            style={{\n              background: PAGE_STYLES.cardBackground,\n              backdropFilter: 'blur(10px)',\n            }}\n          >\n            <Group justify=\"space-between\" mb=\"sm\">\n              <Title order={3} size=\"h4\">Мои счета</Title>\n              <Group gap=\"xs\">\n                <Text size=\"xs\" c=\"dimmed\">\n                  {accountsData ? `${accountsData.totalBanks} банков, ${accountsData.totalAccounts} счетов` : ''}\n                </Text>\n                <Button\n                  size=\"xs\"\n                  variant=\"light\"\n                  leftSection={<IconRefresh size={16} />}\n                  onClick={handleRefreshAccounts}\n                  loading={refreshLoading}\n                  disabled={refreshLoading}\n                >\n                  Обновить\n                </Button>\n              </Group>\n            </Group>\n\n            {accountsLoading ? (\n              <Center py=\"xl\">\n                <Loader size=\"sm\" />\n              </Center>\n            ) : accountsData && accountsData.banks.length > 0 ? (\n              <Stack gap=\"md\">\n                {accountsData.banks.map((bank) => (\n                  <div key={bank.bankId}>\n                    <Group mb=\"sm\">\n                      <IconBuildingBank size={20} color={PAGE_STYLES.buttonBlue} />\n                      <Text size=\"sm\" fw={600} c=\"dimmed\">\n                        {bank.bankId}\n                      </Text>\n                      <Badge size=\"sm\" variant=\"light\">\n                        {bank.accounts.length} {bank.accounts.length === 1 ? 'счет' : 'счетов'}\n                      </Badge>\n                    </Group>\n                    <SimpleGrid cols={{ base: 1, sm: 2, md: 3 }} spacing=\"md\">\n                      {bank.accounts.map((account) => (\n                        <Card\n                          key={account.id}\n                          padding=\"md\"\n                          radius=\"md\"\n                          style={{\n                            background: PAGE_STYLES.paperBackground,\n                            border: '1px solid rgba(0, 0, 0, 0.1)',\n                          }}\n                        >\n                          <Stack gap=\"xs\">\n                            <Group justify=\"space-between\" align=\"flex-start\">\n                              <Stack gap={2} style={{ flex: 1 }}>\n                                <Text size=\"sm\" fw={600}>\n                                  {account.nickname || account.accountName}\n                                </Text>\n                                <Text size=\"xs\" c=\"dimmed\">\n                                  {account.accountNumber ? `****${account.accountNumber.slice(-4)}` : account.accountId}\n                                </Text>\n                              </Stack>\n                              <Badge\n                                color={account.isActive ? 'green' : 'gray'}\n                                size=\"xs\"\n                                variant=\"light\"\n                              >\n                                {account.isActive ? 'Активен' : 'Неактивен'}\n                              </Badge>\n                            </Group>\n\n                            <Group gap=\"xs\" align=\"center\">\n                              <IconCreditCard size={16} color={PAGE_STYLES.buttonBlue} />\n                              <Text size=\"xs\" c=\"dimmed\">\n                                {account.accountType} • {account.accountSubType}\n                              </Text>\n                            </Group>\n\n                            <Stack gap={2} mt=\"xs\">\n                              <Text size=\"lg\" fw={700} c={PAGE_STYLES.buttonBlue}>\n                                {formatBalance(account.balance, account.currency)}\n                              </Text>\n                              <Text size=\"xs\" c=\"dimmed\">\n                                Доступно: {formatBalance(account.availableBalance, account.availableBalanceCurrency)}\n                              </Text>\n                            </Stack>\n\n                            {account.bankConsent && (\n                              <Badge\n                                size=\"xs\"\n                                color={account.bankConsent.status === 'approved' ? 'green' : 'orange'}\n                                variant=\"light\"\n                              >\n                                Согласие: {account.bankConsent.status}\n                              </Badge>\n                            )}\n                          </Stack>\n                        </Card>\n                      ))}\n                    </SimpleGrid>\n                  </div>\n                ))}\n              </Stack>\n            ) : (\n              <Center py=\"xl\">\n                <Stack align=\"center\" gap=\"xs\">\n                  <IconCreditCard size={32} color=\"gray\" />\n                  <Text size=\"sm\" c=\"dimmed\">\n                    Нет подключенных счетов\n                  </Text>\n                  <Text size=\"xs\" c=\"dimmed\">\n                    Подключите банк, чтобы увидеть счета\n                  </Text>\n                </Stack>\n              </Center>\n            )}\n          </Card>\n        </Stack>\n      </Container>\n\n      {/* Модальное окно для подключения банка */}\n      <Modal\n        opened={isModalOpen}\n        onClose={handleModalClose}\n        title={`Подключение банка ${selectedBank?.name || ''}`}\n        size=\"md\"\n      >\n        <Stack gap=\"md\">\n          {error && (\n            <Alert icon={<IconAlertCircle size={16} />} title=\"Ошибка\" color=\"red\">\n              {error}\n            </Alert>\n          )}\n\n          <Text size=\"sm\" c=\"dimmed\">\n            Введите ваш client_id для банка {selectedBank?.name}. Это поле опционально, если у вас уже есть сохраненный client_id для этого банка.\n          </Text>\n\n          <TextInput\n            label=\"Client ID\"\n            placeholder=\"team052-1\"\n            value={clientId}\n            onChange={(e) => setClientId(e.target.value)}\n            description=\"Оставьте пустым, если client_id уже сохранен в вашем профиле\"\n            disabled={!!lastRequestId}\n          />\n\n          {lastRequestId && (\n            <Alert color=\"blue\" icon={<IconCheck size={16} />}>\n              <Stack gap=\"xs\">\n                <Text size=\"sm\" fw={500}>\n                  Запрос отправлен. Request ID: {lastRequestId}\n                </Text>\n                {consentStatus && (\n                  <Text size=\"sm\">\n                    Статус: <strong>{consentStatus}</strong>\n                  </Text>\n                )}\n                <Button\n                  size=\"xs\"\n                  variant=\"light\"\n                  onClick={handleCheckStatus}\n                  loading={statusLoading}\n                  disabled={statusLoading}\n                >\n                  Проверить статус\n                </Button>\n              </Stack>\n            </Alert>\n          )}\n\n          <Group justify=\"flex-end\" gap=\"sm\" mt=\"md\">\n            <Button variant=\"outline\" onClick={handleModalClose}>\n              {lastRequestId ? 'Закрыть' : 'Отмена'}\n            </Button>\n            {!lastRequestId && (\n              <Button \n                onClick={handleConsentSubmit} \n                loading={consentLoading}\n                disabled={consentLoading}\n              >\n                Отправить запрос\n              </Button>\n            )}\n          </Group>\n        </Stack>\n      </Modal>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}