{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%A0%D1%83%D1%81%D0%BB%D0%B0%D0%BD/Desktop/%D0%9F%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B/multibank-frontend/src/app/login/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { Anchor, Button, Center, Container, Group, Paper, PasswordInput, Stack, Text, TextInput, Title } from \"@mantine/core\";\r\nimport { notifications } from '@mantine/notifications';\r\nimport { IconAt, IconLock } from '@tabler/icons-react';\r\nimport { useLoginMutation } from '@/lib/store/api/AuthApi';\r\nimport { userApi } from '@/lib/store/api/UserApi';\r\nimport { authApi } from '@/lib/store/api/AuthApi';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useGetCurrentUserQuery } from '@/lib/store/api/UserApi';\r\n\r\nexport default function Login() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [login, { isLoading }] = useLoginMutation();\r\n  const dispatch = useDispatch();\r\n  const { isSuccess } = useGetCurrentUserQuery();\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      router.replace('/dashboard');\r\n    }\r\n  }, [isSuccess, router]);\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      dispatch(userApi.util.resetApiState());\r\n      dispatch(authApi.util.resetApiState());\r\n\r\n      await login({ email, password }).unwrap();\r\n      router.replace('/dashboard');\r\n    } catch (error: any) {\r\n      notifications.show({\r\n        color: 'red',\r\n        title: 'Не удалось войти',\r\n        message: error?.data?.message || 'Проверьте почту и пароль',\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Center h={\"100dvh\"} style={{ background: 'linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)' }}>\r\n      <Container size={420}>\r\n        <Paper shadow=\"lg\" radius=\"md\" p=\"xl\" withBorder bg=\"white\">\r\n          <Stack>\r\n            <Title order={2} c=\"#1e3a8a\" ta=\"center\">Вход в Multibank</Title>\r\n            <Text size=\"sm\" c=\"dimmed\" ta=\"center\">Синий и белый — наш стиль</Text>\r\n\r\n            <TextInput\r\n              label=\"Почта\"\r\n              placeholder=\"ivanov@mail.ru\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              leftSection={<IconAt size={18} />}\r\n              required\r\n            />\r\n            <PasswordInput\r\n              label=\"Пароль\"\r\n              placeholder=\"Ваш пароль\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              leftSection={<IconLock size={18} />}\r\n              required\r\n            />\r\n            <Button\r\n              onClick={handleSubmit}\r\n              loading={isLoading}\r\n              radius=\"md\"\r\n              size=\"md\"\r\n              variant=\"gradient\"\r\n              gradient={{ from: '#1e3a8a', to: '#3b82f6' }}\r\n            >\r\n              Войти\r\n            </Button>\r\n            <Group justify=\"center\">\r\n              <Text size=\"sm\" c=\"dimmed\">Нет аккаунта?</Text>\r\n              <Anchor component={Link} href=\"/registration\" size=\"sm\" c=\"#1e3a8a\">Зарегистрироваться</Anchor>\r\n            </Group>\r\n          </Stack>\r\n        </Paper>\r\n      </Container>\r\n    </Center>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAVA;;;;;;;;;;;;;AAae,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,EAAE,SAAS,EAAE,CAAC,GAAG,IAAA,yJAAgB;IAC/C,MAAM,WAAW,IAAA,wKAAW;IAC5B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,+JAAsB;IAE5C,IAAA,kNAAS,EAAC;QACR,IAAI,WAAW;YACb,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAW;KAAO;IAEtB,MAAM,eAAe;QACnB,IAAI;YACF,SAAS,gJAAO,CAAC,IAAI,CAAC,aAAa;YACnC,SAAS,gJAAO,CAAC,IAAI,CAAC,aAAa;YAEnC,MAAM,MAAM;gBAAE;gBAAO;YAAS,GAAG,MAAM;YACvC,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,OAAY;YACnB,6LAAa,CAAC,IAAI,CAAC;gBACjB,OAAO;gBACP,OAAO;gBACP,SAAS,OAAO,MAAM,WAAW;YACnC;QACF;IACF;IAEA,qBACE,8OAAC,qLAAM;QAAC,GAAG;QAAU,OAAO;YAAE,YAAY;QAAoD;kBAC5F,cAAA,8OAAC,8LAAS;YAAC,MAAM;sBACf,cAAA,8OAAC,kLAAK;gBAAC,QAAO;gBAAK,QAAO;gBAAK,GAAE;gBAAK,UAAU;gBAAC,IAAG;0BAClD,cAAA,8OAAC,kLAAK;;sCACJ,8OAAC,kLAAK;4BAAC,OAAO;4BAAG,GAAE;4BAAU,IAAG;sCAAS;;;;;;sCACzC,8OAAC,+KAAI;4BAAC,MAAK;4BAAK,GAAE;4BAAS,IAAG;sCAAS;;;;;;sCAEvC,8OAAC,8LAAS;4BACR,OAAM;4BACN,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,2BAAa,8OAAC,4NAAM;gCAAC,MAAM;;;;;;4BAC3B,QAAQ;;;;;;sCAEV,8OAAC,0MAAa;4BACZ,OAAM;4BACN,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,2BAAa,8OAAC,kOAAQ;gCAAC,MAAM;;;;;;4BAC7B,QAAQ;;;;;;sCAEV,8OAAC,qLAAM;4BACL,SAAS;4BACT,SAAS;4BACT,QAAO;4BACP,MAAK;4BACL,SAAQ;4BACR,UAAU;gCAAE,MAAM;gCAAW,IAAI;4BAAU;sCAC5C;;;;;;sCAGD,8OAAC,kLAAK;4BAAC,SAAQ;;8CACb,8OAAC,+KAAI;oCAAC,MAAK;oCAAK,GAAE;8CAAS;;;;;;8CAC3B,8OAAC,qLAAM;oCAAC,WAAW,uKAAI;oCAAE,MAAK;oCAAgB,MAAK;oCAAK,GAAE;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlF","debugId":null}}]
}