{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/astra/Desktop/ooo2/multibank-frontend/src/app/login/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { Button, Center, Container, PasswordInput, Stack, TextInput } from \"@mantine/core\";\r\nimport { useLoginMutation } from '@/lib/store/api/AuthApi';\r\nimport { userApi } from '@/lib/store/api/UserApi';\r\nimport { authApi } from '@/lib/store/api/AuthApi';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useState } from 'react';\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [login, { isLoading }] = useLoginMutation();\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      dispatch(userApi.util.resetApiState());\r\n      dispatch(authApi.util.resetApiState());\r\n      \r\n      const result = await login({ email, password }).unwrap();\r\n\r\n      localStorage.setItem('access_token', result.access_token);\r\n      localStorage.setItem('user', JSON.stringify(result.user));\r\n\r\n      document.cookie = `access_token=${result.access_token}; path=/`;\r\n\r\n      window.location.href = '/dashboard';\r\n\r\n    } catch (error) {\r\n      console.error('Ошибка входа:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Center h={200}>\r\n      <Container size=\"sm\">\r\n        <Stack w={400}>\r\n          <TextInput\r\n            label=\"Почта\"\r\n            placeholder=\"Иванов@mail.ru\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n          <PasswordInput\r\n            label=\"Пароль\"\r\n            placeholder=\"Пароль\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n          <Button\r\n            onClick={handleSubmit}\r\n            loading={isLoading}\r\n          >\r\n            Войти\r\n          </Button>\r\n        </Stack>\r\n      </Container>\r\n    </Center>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AANA;;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,EAAE,SAAS,EAAE,CAAC,GAAG,IAAA,yJAAgB;IAC/C,MAAM,WAAW,IAAA,wKAAW;IAE5B,MAAM,eAAe;QACnB,IAAI;YACF,SAAS,gJAAO,CAAC,IAAI,CAAC,aAAa;YACnC,SAAS,gJAAO,CAAC,IAAI,CAAC,aAAa;YAEnC,MAAM,SAAS,MAAM,MAAM;gBAAE;gBAAO;YAAS,GAAG,MAAM;YAEtD,aAAa,OAAO,CAAC,gBAAgB,OAAO,YAAY;YACxD,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO,IAAI;YAEvD,SAAS,MAAM,GAAG,CAAC,aAAa,EAAE,OAAO,YAAY,CAAC,QAAQ,CAAC;YAE/D,OAAO,QAAQ,CAAC,IAAI,GAAG;QAEzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC;IACF;IAEA,qBACE,8OAAC,qLAAM;QAAC,GAAG;kBACT,cAAA,8OAAC,8LAAS;YAAC,MAAK;sBACd,cAAA,8OAAC,kLAAK;gBAAC,GAAG;;kCACR,8OAAC,8LAAS;wBACR,OAAM;wBACN,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,QAAQ;;;;;;kCAEV,8OAAC,0MAAa;wBACZ,OAAM;wBACN,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,QAAQ;;;;;;kCAEV,8OAAC,qLAAM;wBACL,SAAS;wBACT,SAAS;kCACV;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}